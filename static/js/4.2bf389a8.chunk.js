(this["webpackJsonpeos-host"]=this["webpackJsonpeos-host"]||[]).push([[4],{195:function(t,i,n){t.exports={root:"Notification_root__2oU-2",title:"Notification_title__3n84K",button:"Notification_button__1_d02",timer:"Notification_timer__1H3km"}},196:function(t,i,n){t.exports={bar:"MiniTimerDisplay_bar__3C3Vk"}},197:function(t,i,n){t.exports={root:"NotificationQueue_root__g6V13"}},201:function(t,i,n){"use strict";n.r(i);var e,o=n(1),a=n.n(o),r=n(5),c=n(2),u=n(3),s=n(16),f=n.n(s),l=n(7),m=n(14),b=n(10),v=n(39),p=n(13),N=n(11),d={initNotificationSystem:Object(p.a)("init notification system"),createNotification:Object(p.a)("create notification"),removeNotification:Object(p.a)("remove notification"),updateNotificationTitle:Object(p.a)("update notification title")},h=(e={},Object(l.a)(e,d.initNotificationSystem,(function(t){return Object(b.a)({},t,{notifications:[]})})),Object(l.a)(e,d.createNotification,(function(t,i){return Object(b.a)({},t,{notifications:[].concat(Object(m.a)(t.notifications),[i])})})),Object(l.a)(e,d.removeNotification,(function(t,i){return Object(b.a)({},t,{notifications:t.notifications.filter((function(t){return t.id!==i}))})})),Object(l.a)(e,d.updateNotificationTitle,(function(t,i){var n=i.notificationId,e=i.title;return Object(b.a)({},t,{notifications:t.notifications.map((function(t){return t.id===n?Object(b.a)({},t,{title:e}):t}))})})),e);Object(N.a)(h,{notifications:[]});var O=Object(v.a)(d,N.b.dispatch),_=n(0),j=n.n(_),y=n(12),C=n(79),k=n(195),g=n.n(k),T=n(102),E=n(196),w=n.n(E),D=n(8),I=n.n(D),P=function(t){var i=t.duration,n=t.onComplete,e=t.className,o=Object(T.a)(i);return Object(_.useEffect)((function(){o>=1&&n&&n()})),j.a.createElement("div",{className:I()(w.a.root,e)},j.a.createElement("div",{className:w.a.bar,style:{width:100*o+"%"}}))},B=function(t){var i=t.title,n=t.onButtonClick,e=t.buttonLabel,o=t.onTimerComplete,a=t.timerDuration;return j.a.createElement("div",{className:g.a.root},i?j.a.createElement("div",{className:g.a.title},i):null,n?j.a.createElement(C.a,{className:g.a.button,onClick:function(t){t.stopPropagation(),n()}},e):null,o?j.a.createElement(P,{className:g.a.timer,onComplete:o,duration:a}):null)},L=n(197),F=n.n(L),M=Object(y.b)((function(t){return{notifications:t.notifications}}))((function(t){var i=t.notifications;return j.a.createElement("div",{className:F.a.root},i.map((function(t){var i=t.id,n=t.title,e=t.onButtonClick,o=t.buttonLabel,a=t.onTimerComplete,r=t.timerDuration;return j.a.createElement(B,{key:i,title:n,onButtonClick:e,buttonLabel:o,onTimerComplete:a,timerDuration:r})})))})),R=f()("eos:notification:NotificationManager"),x=function(){function t(){Object(c.a)(this,t),this._notifications=new Map}return Object(u.a)(t,[{key:"init",value:function(){O.initNotificationSystem(),N.c.addUiElement(M),R("initialized notification")}},{key:"registerNotification",value:function(t,i){var n=this._notifications.get(t);n&&n.remove(),this._notifications.set(t,i)}},{key:"unregisterNotification",value:function(t,i){this._notifications.get(t)===i&&this._notifications.delete(t)}},{key:"getNotification",value:function(t){return this._notifications.get(t)}}]),t}(),S=n(9),A=function(){function t(i){var n=this;Object(c.a)(this,t),this.nativeGetNotification=function(t){if("string"!==typeof t)throw new TypeError("id must be a string");var i=n.notificationManager.getNotification(t);if(i){var e=n.interpreter.createObjectProto(n.NOTIFICATION_PROTO);return e.data=i,e}},this.notificationManager=i(x)}return Object(u.a)(t,[{key:"init",value:function(t,i){this.interpreter=t;this.Notification=t.createNativeFunction((function(){throw new Error("Cannot construct Notification object, use Notification.get")}),!0),this.NOTIFICATION_PROTO=this.Notification.properties.prototype,t.setProperty(i,"Notification",this.Notification),t.setProperty(this.Notification,"get",t.createNativeFunction(this.nativeGetNotification),S.a.NONENUMERABLE_DESCRIPTOR);t.setNativeFunctionPrototype(this.Notification,"remove",(function(){this.data.remove()})),t.setNativeFunctionPrototype(this.Notification,"setTitle",(function(t){if("string"!==typeof t)throw new TypeError("title must be a string");this.data.setTitle(t)}))}}]),t}(),U=function(){function t(i){var n=i.id,e=i.title,o=i.onButtonClick,a=i.buttonLabel,r=i.onTimerComplete,u=i.timerDuration;Object(c.a)(this,t),this.id=n,this.title=e,this.onButtonClick=o,this.buttonLabel=a,this.onTimerComplete=r,this.timerDuration=u}return Object(u.a)(t,[{key:"show",value:function(){O.createNotification(this)}},{key:"remove",value:function(){O.removeNotification(this.id)}},{key:"setTitle",value:function(t){O.updateNotificationTitle({notificationId:this.id,title:t})}},{key:"handleButtonClick",value:function(){console.log("clicked")}}]),t}(),G=n(20),J=n(50),V=n(35),z=n.n(V),H=0,K=function(t){t.host;var i,n=t.deps,e=t.opts,o=t.getCommand,a=n(G.a),r=e.id,c=void 0===r?"__anonymous_notification"+ ++H:r,u=e.title,s=e.buttonCommands,f=e.buttonLabel,l=e.timerCommands,m=e.timerDuration,b=n(x),v=l?l.map((function(t){return o(t)})):void 0,p=s?s.map((function(t){return o(t)})):void 0;return{prerender:function(){if(m&&"$"===m[0]){var t=n(S.b),o=e.timerDuration.slice(1);i=new z.a(Number(t.eval(o)))}else i=Object(J.a)(m||"0s")},run:function(){var t=s?function(){n.remove(),a.interrupt(p)}:void 0,n=new U({id:c,title:u,onTimerComplete:l?function(){n.remove(),a.interrupt(v)}:void 0,timerDuration:i.milliseconds(),onButtonClick:t,buttonLabel:f});c&&b.registerNotification(c,n),n.show()}}},Q=function(t){t.host;var i=t.deps,n=t.opts.id,e=i(x);return{run:function(){var t=e.getNotification(n);t&&t.remove()}}};i.default=function(){var t=Object(r.a)(a.a.mark((function t(i){var n,e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i(A),i(x).init(),e={createCommand:K,removeCommand:Q},t.abrupt("return",{commands:e,vm:n.init.bind(n)});case 5:case"end":return t.stop()}}),t)})));return function(i){return t.apply(this,arguments)}}()}}]);
//# sourceMappingURL=4.2bf389a8.chunk.js.map