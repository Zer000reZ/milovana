(this["webpackJsonpeos-host"]=this["webpackJsonpeos-host"]||[]).push([[0],{100:function(e,t,n){"use strict";var r=n(2),a=n(3),o=function(){function e(){Object(r.a)(this,e),this.callbacks=[]}return Object(a.a)(e,[{key:"registerInteractionCallback",value:function(e){if("function"!==typeof e)throw new TypeError("callback must be a function");this.callbacks.push(e)}},{key:"runInteractionCallbacks",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.callbacks[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){(0,r.value)()}}catch(o){t=!0,n=o}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}this.callbacks=[]}}]),e}();t.a=o},101:function(e,t,n){e.exports={root:"Button_root__28K_E"}},102:function(e,t,n){e.exports={root:"Bubble_root__1WuOT"}},103:function(e,t,n){e.exports={root:"SingleBubble_root__2r7DX"}},108:function(e,t,n){e.exports={root:"BubbleQueue_root__Q9y8s","fade-in":"BubbleQueue_fade-in__3ZneC"}},110:function(e,t,n){e.exports={root:"ActivitiesBar_root__5YoNy"}},111:function(e,t,n){e.exports={root:"Background_root__QnKRW"}},112:function(e,t,n){e.exports={root:"Viewport_root__1xGnl"}},114:function(e,t,n){e.exports=n(115)},115:function(e,t,n){"use strict";n.r(t);var r=n(15),a=n.n(r),o=n(53),i=n(113),c=n.n(i),u=(n(186),n(187),o.a.deps=c()()),s=o.a.host=u(o.a);if(window.URLSearchParams){var l=new URLSearchParams(window.location.search),f=l.get("debug");f&&a.a.enable(f);var d=l.get("start");d&&s.setStartPage(d)}s.load()},139:function(e,t){},14:function(e,t,n){e.exports={root:"TimerDisplay_root__SL54y",label:"TimerDisplay_label__ewcfy",secretTimer:"TimerDisplay_secretTimer__3WcVY","unknown-timer-rotate":"TimerDisplay_unknown-timer-rotate__65y9y",eosSecretTimerBackground:"TimerDisplay_eosSecretTimerBackground__2g0Nf",skip:"TimerDisplay_skip__3GZ26",debugText:"TimerDisplay_debugText__TnGXO"}},141:function(e,t){},16:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),a=n.n(r),o=n(2),i=n(3),c=function(){function e(){Object(o.a)(this,e),this.unique=0,this.callbacks=[],window.addEventListener("message",this.handleMessage.bind(this))}return Object(i.a)(e,[{key:"call",value:function(e,t){var n=this;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,a){var o=n.unique++;n.callbacks[o]={resolve:r,reject:a},window.parent.postMessage({jsonrpc:"2.0",method:e,params:t,id:o},"*")})));case 1:case"end":return r.stop()}}))}},{key:"handleMessage",value:function(e){var t=e.data,n=t.jsonrpc,r=t.result,a=t.error,o=t.id;if(("string"!==typeof e.data.type||!e.data.type.startsWith("webpack"))&&"2.0"===n)if("undefined"!==typeof o)if(this.callbacks[o]){var i=this.callbacks[o],c=i.resolve,u=i.reject;delete this.callbacks[o],"undefined"!==typeof r?c(r):"undefined"!==typeof a?u(new Error(a.message)):console.error("malformed rpc response from parent, no result or error given. id="+o)}else console.error("malformed rpc message from parent, wrong id or id used twice.");else console.error("malformed rpc message from parent, no id specified.")}}]),e}()},18:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(13),i=n(2),c=n(3);var u=function e(){Object(i.a)(this,e)};function s(e){if(!(t=e)||"object"!==typeof t&&"function"!==typeof t||"function"!==typeof t.then)throw new TypeError("makeCancelable must receive a promise");var t,n,r=new Promise((function(t,r){n=function(){return r(new u)},e.then((function(e){return t(e)}),(function(e){return r(e)}))}));return r.cancel=n,r}var l=n(9);n.d(t,"a",(function(){return f}));var f=function(){function e(t){Object(i.a)(this,e),this.currentActionPromise=null,this.actionQueue=[]}return Object(c.a)(e,[{key:"setQueue",value:function(e){this.stopQueue(),this.clearQueue(),this.actionQueue=e.slice(),this.startQueue()}},{key:"appendQueue",value:function(e){this.actionQueue=[].concat(Object(o.a)(this.actionQueue),Object(o.a)(e))}},{key:"prependQueue",value:function(e){this.actionQueue=[].concat(Object(o.a)(e),Object(o.a)(this.actionQueue))}},{key:"interrupt",value:function(e){this.stopQueue(),this.prependQueue(e),this.startQueue()}},{key:"startQueue",value:function(){var e=this;this.currentActionPromise||function(){var t;return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.actionQueue.length){n.next=12;break}if(!(t=e.actionQueue.shift()).prerender){n.next=6;break}return e.currentActionPromise=s(Promise.resolve(t.prerender())),n.next=6,a.a.awrap(e.currentActionPromise);case 6:return t.render&&("bubbles"===t.renderParent?l.c.addBubble(t.render):"activities"===t.renderParent?l.c.addActivity(t.render):"statusEffects"===t.renderParent?l.c.addStatusEffect(t.render):l.c.addPageElement(t.render)),e.currentActionPromise=s(Promise.resolve(t.run())),n.next=10,a.a.awrap(e.currentActionPromise);case 10:n.next=0;break;case 12:e.currentActionPromise=null;case 13:case"end":return n.stop()}}))}().catch((function(e){e instanceof u||console.error(e)}))}},{key:"stopQueue",value:function(){this.currentActionPromise&&(this.currentActionPromise.cancel(),this.currentActionPromise=null)}},{key:"clearQueue",value:function(){this.actionQueue=[]}},{key:"peekNextAction",value:function(){return this.actionQueue[0]}}]),e}()},187:function(e,t,n){},38:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(11),a=n(104),o=n.n(a),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"!==typeof e?{__html:""}:o()(e,Object(r.a)({whiteList:{br:[],b:[],i:[],u:[],strong:[],em:[],p:["style"],span:["class","style"]},css:{whiteList:{color:!0,"text-align":!0,"font-size":!0,"letter-spacing":!0}}},t))}},40:function(e,t,n){e.exports={root:"PromptBubble_root__fSr1O",done:"PromptBubble_done__3qOq8",result:"PromptBubble_result__1xJPq",measure:"PromptBubble_measure__2P-za"}},41:function(e,t,n){e.exports={root:"TextBubble_root__3Uhs_",alignLeft:"TextBubble_alignLeft__3F4Tk",alignRight:"TextBubble_alignRight__354xM",continueIndicator:"TextBubble_continueIndicator__sXRN-",cursor:"TextBubble_cursor__3RADp"}},42:function(e,t,n){e.exports={root:"DebugInterface_root__3CKfN",bar:"DebugInterface_bar__1RUJ-",title:"DebugInterface_title__380mE",page:"DebugInterface_page__3rdp-",contents:"DebugInterface_contents__1Ednz"}},43:function(e,t,n){e.exports={root:"TopBar_root__vkQ0A",tease:"TopBar_tease__1kRgf",author:"TopBar_author__1plow",authorButton:"TopBar_authorButton__Nrip5"}},5:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(2),a=n(3),o=n(25),i=n(24),c=n(23),u=n(26),s=n(21),l=n(15),f=n.n(l),d=window.Interpreter,p=f()("eos:host:VirtualMachine"),b=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(o.a)(this,Object(i.a)(t).call(this))).init=e.init.bind(Object(c.a)(e)),e._interpreter=null,e}return Object(u.a)(t,e),Object(a.a)(t,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._interpreter=new d("");var t=!0,n=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value;i(this._interpreter,this._interpreter.global)}}catch(c){n=!0,r=c}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}this.emit("init",this._interpreter,this._interpreter.global)}},{key:"eval",value:function(e){return p("eval: %s",e),this.emit("preEval",this._interpreter),this._interpreter.appendCode(e),this._interpreter.run(),this.emit("postEval",this._interpreter),this._interpreter.value}},{key:"dispatchEvent",value:function(e){var t=e.target,n=e.type,r=e.eventClass,a=void 0===r?"Event":r,o=this._interpreter.global.properties.EventTarget;if(!this._interpreter.isa(t,o))throw new TypeError("tried to dispatch an event on a non-EventTarget");this._interpreter.setProperty(o,"currentTarget",t),this._interpreter.appendCode("EventTarget.currentTarget.dispatchEvent(new ".concat(a,"('").concat(n,"'))")),this._interpreter.run()}}]),t}(s.EventEmitter);t.b=b},50:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(8),a=n(35),o=n.n(a),i=n(15),c=n.n(i)()("eos:host:command:timer"),u=function(e){if(-1!==e.indexOf("-")){var t=e.split("-").map((function(e){return new o.a(e).milliseconds()})),n=Object(r.a)(t,2),a=n[0],i=n[1],u=Math.random()*(i-a)+a;return c("random duration. min=%s max=%s chosen=%s",a,i,u),new o.a(u)}return new o.a(e)}},52:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(2),i=n(3),c=n(16),u=n(9),s=function(){function e(t){Object(o.a)(this,e),this.outerSandbox=t(c.a)}return Object(i.a)(e,[{key:"getTitle",value:function(){return this._title}},{key:"getAuthor",value:function(){return this._author}},{key:"getScript",value:function(){return this._script}},{key:"load",value:function(){var e,t,n,r,o;return a.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,a.a.awrap(this.outerSandbox.call("load"));case 2:return e=i.sent,t=e.title,n=e.author,r=e.script,o=e.preview,this._title=t,this._author=n,this._script=r,this._preview=o,u.c.load({title:t,author:n,script:r,preview:o}),i.abrupt("return",this._script);case 13:case"end":return i.stop()}}),null,this)}}]),e}();t.a=s},53:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"noopCommand",(function(){return h})),n.d(r,"choiceCommand",(function(){return G})),n.d(r,"disableCommand",(function(){return W})),n.d(r,"enableCommand",(function(){return H})),n.d(r,"endCommand",(function(){return X})),n.d(r,"evalCommand",(function(){return J})),n.d(r,"gotoCommand",(function(){return Z})),n.d(r,"ifCommand",(function(){return $})),n.d(r,"imageCommand",(function(){return se})),n.d(r,"promptCommand",(function(){return me})),n.d(r,"sayCommand",(function(){return Te})),n.d(r,"timerCommand",(function(){return Re}));var a={};n.r(a),n.d(a,"nyxModule",(function(){return Be})),n.d(a,"pcm2Module",(function(){return Le})),n.d(a,"audioModule",(function(){return Qe})),n.d(a,"notificationModule",(function(){return De})),n.d(a,"storageModule",(function(){return Ge}));var o={};n.r(o),n.d(o,"ConsoleVm",(function(){return Ue})),n.d(o,"EventsVm",(function(){return Fe})),n.d(o,"PagesVm",(function(){return ze}));var i=n(8),c=n(1),u=n.n(c),s=n(2),l=n(3),f=n(25),d=n(24),p=n(23),b=n(26),h=function(e){e.host,e.deps,e.opts;return{run:function(){}}},m=n(0),v=n.n(m),g=n(74),y=n(4),E=n(7),_=n.n(E),O=n(102),j=n.n(O),w=function(e){var t=e.children,n=e.className,r=Object(y.a)(e,["children","className"]);return v.a.createElement("div",Object.assign({},r,{className:_()(n,j.a.root)}),t)},k=function(e){var t=e.children,n=Object(y.a)(e,["children"]);return v.a.createElement(w,n,t)},P=n(103),x=n.n(P),N=function(e){var t=e.children,n=e.className,r=Object(y.a)(e,["children","className"]);return v.a.createElement(w,Object.assign({className:_()(x.a.root,n)},r),t)},C=n(38),T=n(44),A=n.n(T),S=n(65),M=n.n(S),R=function(e){var t=e.options,n=e.onSelect,r=e.active,a=Object(m.useState)(null),o=Object(i.a)(a,2),c=o[0],u=o[1];return Object(m.useEffect)((function(){r||c||u({label:"\u22ef"})}),[r,c]),c?v.a.createElement(N,{dangerouslySetInnerHTML:{__html:Object(C.a)("&gt; ".concat(c.label," &lt;"))}}):v.a.createElement(k,{className:M.a.root},t.map((function(e,t){var r=Object(C.a)(e.label);return v.a.createElement(g.a,{key:t,style:{backgroundColor:e.color||"#111"},className:M.a.button,onClick:function(){u(e),n(e)}},A()(r))})))},B=n(18),L=n(5),Q=/<eval>([^<]*)<\/eval>/gi;var D=function(){function e(t){Object(s.a)(this,e),this._virtualMachine=t(L.b)}return Object(l.a)(e,[{key:"resolve",value:function(e){var t=this;return e.replace(Q,(function(e,n){return n.length?t._virtualMachine.eval("("+(r=n,(new DOMParser).parseFromString(r,"text/html").documentElement.textContent)+")"):"";var r}))}}]),e}(),G=function(e){var t,n=e.deps,r=e.opts,a=(e.host,e.getCommand),o=r.options,i=n(B.a),c=n(D),u=o.map((function(e){var t=e.commands.map((function(e){return a(e)}));return e.label=c.resolve(e.label),{label:e.label,visible:e.visible,color:e.color,preload:function(e){var n=e.depth;return Promise.all(t.map((function(e){return e.preload({depth:n})})))},run:function(){return i.prependQueue(t)}}})),s=new Promise((function(e){t=e}));return{run:function(){return s},prerender:function(){var e=n(L.b);u=u.filter((function(t){return"string"===typeof t.visible&&"$"===t.visible[0]?Boolean(e.eval(t.visible.slice(1))):"boolean"!==typeof t.visible||t.visible}))},render:function(e){var n=e.active;return v.a.createElement(R,{active:n,options:u,onSelect:function(e){e.run(),t()}})},renderParent:"bubbles"}},I=n(30),U=n.n(I),F=n(15),z=n.n(F),q=z()("eos:PageTracker"),V=function(){function e(t){Object(s.a)(this,e),this.host=t(Dt),this.runCounter=0,this.disabledPages=new Set,this.currentPage=null,this.host.on("page",this.handlePage.bind(this))}return Object(l.a)(e,[{key:"enable",value:function(e){var t=U.a.filter(e),n=this.host.getPageNames().filter(t);q("pattern %s enables %s page(s)",e,n.length);var r=!0,a=!1,o=void 0;try{for(var i,c=n[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var u=i.value;this.disabledPages.delete(u)}}catch(s){a=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}}},{key:"disable",value:function(e){var t=U.a.filter(e),n=this.host.getPageNames().filter(t);q("pattern %s disables %s page(s)",e,n.length);var r=!0,a=!1,o=void 0;try{for(var i,c=n[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var u=i.value;this.disabledPages.add(u)}}catch(s){a=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}}},{key:"isEnabled",value:function(e){return!this.disabledPages.has(e)}},{key:"getCurrentPageId",value:function(){return this.currentPage}},{key:"handlePage",value:function(e){this.runCounter++,this.currentPage=e}}]),e}(),W=function(e){var t=e.deps,n=e.opts.target,r=(e.host,t(V));return{run:function(){r.disable(n)}}},H=function(e){var t=e.deps,n=e.opts.target,r=(e.host,t(V));return{run:function(){r.enable(n)}}},K=n(16),X=function(e){e.host;var t=e.deps;e.opts;return{run:function(){t(K.a).call("openRatingDialog")}}},J=function(e){e.host;var t=e.deps,n=e.opts;return{run:function(){var e=t(L.b);try{e.eval(n.script)}catch(r){console.error(r)}}}},Y=function(e){return"string"===typeof e&&("!"===e[0]||(-1!==e.indexOf("*")||(-1!==e.indexOf("?")||(-1!==e.indexOf("{")||-1!==e.indexOf("(")))))},Z=function(e){var t=e.deps,n=(e.host,e.opts),r=n.target,a=(Object(y.a)(n,["target"]),e.getPage),o=e.getPagesByGlob,i=t(V),c=function(e){var t=e.filter((function(e){return i.isEnabled(e.id)}));if(0===t.length)throw new Error("No enabled pages matching pattern: "+r);return t[Math.floor(Math.random()*t.length)]};if("$"===r[0]){return{run:function(){var e=t(L.b),n=r.slice(1),i=String(e.eval(n));if(Y(i)){var u=o(i);c(u).show()}else{var s=a(i);if(!s)throw new Error("Page not found: "+r);s.show()}}}}if(Y(r)){var u=o(r);return{run:function(){c(u).show()}}}var s=a(r);return{run:function(){if(!s)throw new Error("Page not found: "+r);s.show()}}},$=function(e){var t=e.deps,n=(e.host,e.opts),r=n.condition,a=n.commands,o=void 0===a?[]:a,i=n.elseCommands,c=void 0===i?[]:i,u=e.getCommand,s=o.map((function(e){return u(e)})),l=c.map((function(e){return u(e)}));return{run:function(){var e=t(B.a);t(L.b).eval("!!("+r+")")?s.length&&e.prependQueue(s):l.length&&e.prependQueue(l)}}},ee=n(72),te=n(67),ne=n.n(te),re=function(e){var t=e.src;return v.a.createElement("div",{className:ne.a.root},v.a.createElement("img",{className:ne.a.picture,src:t,alt:""}))},ae=n(9),oe=n(68),ie=n.n(oe),ce=n(106),ue=n.n(ce);ie.a.use(ue.a);var se=function(e){var t=e.deps,n=e.opts;n.size=n.size||"xl";var r,a=n.locator,o=n.size,i=t(ee.a),c=i.resolveLocator({type:"image/jpeg",locator:a,size:o});return{load:function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.awrap(i.preload(c));case 2:r=e.sent;case 3:case"end":return e.stop()}}))},run:function(){var e,t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.a.awrap(ie.a.from(r).getPalette());case 3:e=n.sent,t=e.DarkMuted,ae.c.setBackgroundColor(t.getHex()),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.warn("Could not detect background color: "+n.t0.stack);case 11:ae.c.setMedia(v.a.createElement(re,{src:r}));case 12:case"end":return n.stop()}}),null,null,[[0,8]])},unload:function(){i.revoke(c)}}},le=n(6),fe=n(40),de=n.n(fe),pe=function(e){var t=e.onSubmit,n=e.active,r=Object(m.useState)(!1),a=Object(i.a)(r,2),o=a[0],c=a[1],u=Object(m.useState)(""),s=Object(i.a)(u,2),l=s[0],f=s[1],d=Object(m.useRef)();Object(m.useEffect)((function(){var e=d.current;!o&&e&&(e.previousElementSibling.style.width=e.offsetWidth+"px")})),Object(m.useEffect)((function(){n||o||(f("".concat(l,"\u2026")),c(!0))}),[n,o,l]);return v.a.createElement(N,{className:_()(de.a.root,Object(le.a)({},de.a.done,o))},o?v.a.createElement("div",{className:de.a.result},"> ",l):v.a.createElement("form",{onSubmit:function(e){c(!0),e.preventDefault(),"function"===typeof t&&t(l)}},v.a.createElement("input",{onChange:function(e){return f(e.target.value)}}),v.a.createElement("div",{ref:d,className:de.a.measure},l)))},be=n(107),he=n.n(be),me=function(e){var t,n=e.deps,r=e.opts,a=n(L.b),o=new Promise((function(e){t=e}));return{run:function(){return o},render:function(e){var n=e.active;return v.a.createElement(pe,{active:n,onSubmit:function(e){r.variable&&a.eval("".concat(r.variable," = '").concat(he()(e),"'")),t()}})},renderParent:"bubbles"}},ve=function(e){return(new DOMParser).parseFromString(e,"text/html").body.textContent||""},ge=function(e){return 1500+Math.max(30*ve(e).length,300*function(e){return(ve(e).trim().replace(/['";:,.?\xbf\-!\xa1]+/g,"").match(/\S+/g)||[]).length}(e))},ye=n(54),Ee=n.n(ye),_e=function(e){var t=e.className,n=e.debug,r=Object(y.a)(e,["className","debug"]);return v.a.createElement("div",Object.assign({},r,{className:_()(Ee.a.root,t,Object(le.a)({},Ee.a.debug,n))}),v.a.createElement("div",{className:Ee.a.inner}))},Oe=n(10),je=n(41),we=n.n(je),ke=function(e){var t=e.children,n=e.className,r=e.align,a=Object(y.a)(e,["children","className","align"]);return v.a.createElement(N,Object.assign({},a,{className:_()(n,we.a.root,{left:we.a.alignLeft,right:we.a.alignRight}[r])}),t)},Pe=function(e){var t=e.children,n=e.className,r=Object(y.a)(e,["children","className"]);return v.a.createElement("div",Object.assign({className:_()(we.a.continueIndicator,n)},r),t)},xe=Object(Oe.b)((function(e){return{debug:e.debug}}))((function(e){var t=e.label,n=e.align,r=e.onContinue,a=e.host,o=e.mode,c=e.duration,u=e.allowSkip,s=e.active,l=e.debug,f=Object(m.useState)(!1),d=Object(i.a)(f,2),p=d[0],b=d[1],h=Object(m.useRef)(null);Object(m.useEffect)((function(){if(s){var e=function(){(!h.current||u||l)&&n()},n=function(){p||(b(!0),r&&r())};if(a.on("continue",e),r&&("autoplay"===o||"custom"===o)){var i="autoplay"===o?ge(t):c;h.current=setTimeout((function(){n()}),i)}return"instant"===o&&n(),function(){a.removeListener("continue",e),h.current&&clearTimeout(h.current)}}b(!0)}),[s,u,p,c,a,t,o,r,l]);var g=Object(C.a)(t);return v.a.createElement(ke,{align:n},v.a.createElement("div",null,A()(g)),p?null:function(e,t){return"pause"===e||t}(o,u)?v.a.createElement(Pe,null,v.a.createElement(_e,null)):l?v.a.createElement(Pe,null,v.a.createElement(_e,{debug:!0})):null)})),Ne=n(50),Ce=["prompt","choice"],Te=function(e){var t,n,r=e.deps,a=e.opts,o=e.host,i=new Promise((function(e){t=e}));return{run:function(){return i},prerender:function(){var e=r(D);n=e.resolve(a.label)},render:function(e){var i,c=e.active,u=r(B.a),s=Object(Ne.a)(a.duration||"0s"),l=a.mode&&"auto"!==a.mode?a.mode:(i=u.peekNextAction())&&(-1!==Ce.indexOf(i.type)||"timer"===i.type&&!i.opts.isAsync)?"instant":"pause";return v.a.createElement(xe,{active:c,label:n,mode:l,align:a.align||"center",allowSkip:a.allowSkip,duration:s.milliseconds(),host:o,onContinue:t})},renderParent:"bubbles"}},Ae=n(98),Se=n(35),Me=n.n(Se),Re=function(e){e.host;var t,n,r=e.deps,a=e.opts,o=e.getCommand,i=r(B.a),c=(a.commands||[]).map((function(e){return o(e)})),s=new Promise((function(e){t=e}));return{run:function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return a.isAsync&&t(),e.next=3,u.a.awrap(s);case 3:case"end":return e.stop()}}))},prerender:function(){if("$"===a.duration[0]){var e=r(L.b),t=a.duration.slice(1);n=new Me.a(Number(e.eval(t)))}else n=Object(Ne.a)(a.duration)},render:function(){return v.a.createElement(Ae.a,{duration:n.milliseconds(),style:a.style,onComplete:function(){c.length&&i.interrupt(c),t()}})},renderParent:"activities"}},Be=function(){return n.e(3).then(n.bind(null,202))},Le=function(){return n.e(6).then(n.bind(null,203))},Qe=function(){return Promise.all([n.e(8),n.e(5)]).then(n.bind(null,205))},De=function(){return n.e(4).then(n.bind(null,204))},Ge=function(){return n.e(7).then(n.bind(null,201))},Ie=n(13),Ue=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"init",value:function(e,t){var n=this;this.CONSOLE=e.createObject(e.OBJECT),e.setProperty(t,"console",this.CONSOLE),["log","info","warn","error"].forEach((function(t){e.setProperty(n.CONSOLE,t,e.createNativeFunction((function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];var i,c;(n=e.pseudoToNative(n),a=a.map((function(t){return e.pseudoToNative(t)})),"string"===typeof n)?(i=console)[t].apply(i,["vm: "+n].concat(Object(Ie.a)(a))):(c=console)[t].apply(c,["vm:",n].concat(Object(Ie.a)(a)))})),L.a.NONENUMERABLE_DESCRIPTOR)}))}}]),e}(),Fe=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"init",value:function(e,t){e.appendCode("\n      function EventTarget() {\n      }\n\n      Object.defineProperties(EventTarget.prototype, {\n        listeners: {\n          get: function () {\n            return this._listeners || []\n          }\n        }\n      })\n\n      EventTarget.prototype.addEventListener = function(type, newListener) {\n        var listeners\n        var listener\n\n        if (!type || !newListener) return\n\n        if (this._listeners === undefined) {\n          this._listeners = {}\n        }\n\n        listeners = this._listeners[type]\n\n        if (listeners === undefined) {\n          this._listeners[type] = listeners = []\n        }\n\n        for (var i = 0; !!(listener = listeners[i]); i++) {\n          if (listener === newListener) return\n        }\n\n        listeners.push(newListener)\n      }\n\n      EventTarget.prototype.removeEventListener = function(type, oldListener) {\n        var listeners\n        var listener\n\n        if (!type || !oldListener) {\n          return\n        }\n\n        if (this._listeners === undefined) return\n\n        listeners = this._listeners[type]\n\n        if (listeners === undefined) return\n\n        for (var i = 0; !!(listener = listeners[i]); i++) {\n          if (listener === oldListener) {\n            listeners.splice(i, 1)\n          }\n        }\n\n        if (listeners.length === 0) {\n          delete this._listeners[type]\n        }\n      }\n\n      EventTarget.prototype.dispatchEvent = function(event) {\n        var listeners\n        var stopImmediatePropagation = false\n        var listener\n\n        if (!event) {\n          throw new TypeError('parameter 1 is not of type \"Event\"')\n        }\n\n        event.stopImmediatePropagation = function() {\n          stopImmediatePropagation = true\n        }\n\n        listeners = ((this._listeners || {})[event.type] || [])\n\n        for (var i = 0; !!(listener = listeners[i]); i++) {\n          if (stopImmediatePropagation) break\n\n          try {\n            listener.call(this, event)\n          } catch (error) {\n            console.error(error)\n          }\n        }\n\n        return !event.defaultPrevented\n      }\n\n      function Event(type) {\n        this.type = type\n        this.timeStamp = Date.now()\n        this.cancelable = false\n      }\n    "),e.run()}}]),e}(),ze=function(){function e(t){Object(s.a)(this,e),this.host=t(Dt),this.virtualMachine=t(L.b),this.pageTracker=t(V)}return Object(l.a)(e,[{key:"init",value:function(e,t){var n=this;this.PAGE_MANAGER=e.createNativeFunction((function(){throw new Error("Cannot construct PageManager object, use `pages` global")}),!0),e.setProperty(this.PAGE_MANAGER,"prototype",e.createObject(t.properties.EventTarget),L.a.NONENUMERABLE_DESCRIPTOR),this.PAGE_MANAGER_PROTO=this.PAGE_MANAGER.properties.prototype,e.setProperty(t,"PageManager",this.PAGE_MANAGER);e.setNativeFunctionPrototype(this.PAGE_MANAGER,"isEnabled",(function(e){if("string"!==typeof e)throw new TypeError("pageId must be a string");return n.pageTracker.isEnabled(e)})),e.setNativeFunctionPrototype(this.PAGE_MANAGER,"enable",(function(e){if("string"!==typeof e)throw new TypeError("pattern must be a string");n.pageTracker.enable(e)})),e.setNativeFunctionPrototype(this.PAGE_MANAGER,"disable",(function(e){if("string"!==typeof e)throw new TypeError("pattern must be a string");n.pageTracker.disable(e)})),e.setNativeFunctionPrototype(this.PAGE_MANAGER,"getCurrentPageId",(function(){return n.pageTracker.getCurrentPageId()})),e.setNativeFunctionPrototype(this.PAGE_MANAGER,"goto",(function(e){if("string"!==typeof e)throw new TypeError("pageId must be a string");return n.host.showPage(e)})),this.PAGES=e.createObjectProto(this.PAGE_MANAGER_PROTO),e.setProperty(t,"pages",this.PAGES),this.host.on("page",(function(){n.virtualMachine.dispatchEvent({target:n.PAGES,type:"change"})}))}}]),e}(),qe=n(21),Ve=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(f.a)(this,Object(d.a)(t).call(this))).step=e.step.bind(Object(p.a)(e)),e}return Object(b.a)(t,e),Object(l.a)(t,[{key:"start",value:function(){window.requestAnimationFrame(this.step)}},{key:"step",value:function(){this.emit("step"),window.requestAnimationFrame(this.step)}}]),t}(qe.EventEmitter),We=n(52),He=n(51),Ke=n.n(He),Xe=n(108),Je=n.n(Xe),Ye=n(109),Ze=function(e){var t=e.bubbles,n=Object(m.useRef)(),r=Object(m.useRef)(!1),a=Object(m.useRef)(0);return Object(m.useEffect)((function(){var e=function(e){var t=n.current;t.scrollTop<a.current?r.current=!0:t.scrollTop===t.scrollHeight-t.clientHeight&&(r.current=!1),a.current=t.scrollTop},t=n.current;return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}),[]),Object(m.useEffect)((function(){var e=!r.current,t=n.current,a=t.scrollHeight-t.clientHeight;e&&Object(Ye.a)(t,{scrollTop:a+"px"},{easing:[.4,0,.2,1],duration:300})})),v.a.createElement("div",{ref:n,className:Je.a.root},t.slice().map((function(e,n){var r=e.Component,a=e.key;return v.a.createElement(r,{key:a,active:n===t.length-1})})))},$e=n(110),et=n.n($e),tt=function(e){var t=e.activities;return v.a.createElement("div",{className:et.a.root},t.map((function(e){var t=e.Component,n=e.key;return v.a.createElement(t,{key:n})})))},nt=Object(m.createContext)(),rt=nt.Provider,at=nt.Consumer,ot=function(e){return function(t){var n=t.children,r=Object(y.a)(t,["children"]);return v.a.createElement(at,null,(function(t){return v.a.createElement(e,Object.assign({},r,{deps:t}),n)}))}},it=n(100),ct=n(55),ut=n.n(ct),st=Object(Oe.b)((function(e){return{title:e.title,author:e.author}}))(ot((function(e){var t=e.deps,n=e.title,r=e.author,a=t(Dt),o=t(it.a);return v.a.createElement("div",{className:ut.a.root,onClick:function(){o.runInteractionCallbacks(),a.runScript()}},v.a.createElement("div",{style:{flex:2}}),v.a.createElement("h1",null,n),v.a.createElement("h2",null,"by ",r),v.a.createElement("div",{style:{flex:1}}),v.a.createElement("div",{className:ut.a.start},"Click to start"),v.a.createElement(_e,{className:ut.a.blinky}),v.a.createElement("div",{style:{flex:1}}))}))),lt=n(11),ft=n(111),dt=n.n(ft),pt=function(e){var t=e.children,n=e.className,r=e.color,a=e.style,o=Object(y.a)(e,["children","className","color","style"]);return v.a.createElement("div",Object.assign({className:_()(dt.a.root,n),style:Object(lt.a)({backgroundColor:r},a)},o),t)},bt=n(112),ht=n.n(bt),mt=ot(Object(Oe.b)((function(e){return{started:e.started,bubbles:e.bubbles,activities:e.activities,pageElements:e.pageElements,uiElements:e.uiElements,backgroundColor:e.backgroundColor,media:e.media}}))((function(e){var t=e.viewportRef,n=e.bubbles,r=e.activities,a=e.pageElements,o=e.uiElements,i=e.backgroundColor,c=e.media,u=e.started,s=(0,e.deps)(Dt);return v.a.createElement("div",{className:ht.a.root,onClick:s.handleGlobalClick,ref:t},u?null:v.a.createElement(st,null),v.a.createElement(pt,{color:i}),c,r.length?v.a.createElement(tt,{activities:r}):null,n.length?v.a.createElement(Ze,{bubbles:n}):null,a.map((function(e){var t=e.key,n=e.Component;return v.a.createElement(n,{key:t})})),o.map((function(e){var t=e.key,n=e.Component;return v.a.createElement(n,{key:t})})))}))),vt=n(42),gt=n.n(vt),yt=ot(Object(Oe.b)((function(e){return{page:e.page}}))((function(e){var t=e.page,n=e.deps;return v.a.createElement("div",{className:gt.a.root},v.a.createElement("div",{className:gt.a.bar},v.a.createElement("h5",{className:gt.a.title},"Debug"),v.a.createElement("button",{className:gt.a.page,onClick:function(){var e,t,r;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(e=prompt("Enter page to jump to:"))){a.next=7;break}return t=n(Dt),a.next=5,u.a.awrap(t.getPage(e));case 5:(r=a.sent)?r.show():alert("No page found with that name!");case 7:case"end":return a.stop()}}))}},t)),null)}))),Et=Object(Oe.b)((function(e){return{debug:e.debug}}))((function(e){return e.debug?v.a.createElement(yt,null):null})),_t=n(31),Ot=n(70),jt=n.n(Ot),wt=function(e){var t=e.children,n=e.className,r=e.hide,a=Object(y.a)(e,["children","className","hide"]);return v.a.createElement("div",Object.assign({className:_()(jt.a.root,Object(le.a)({},jt.a.hide,r),n)},a),t)},kt=ot((function(e){var t=(0,e.deps)(K.a);return v.a.createElement(wt,{onClick:function(e){e.stopPropagation(),t.call("openRatingDialog")}},v.a.createElement(_t.d,{size:20,color:"white"}))})),Pt=n(71),xt=n.n(Pt),Nt=Object(Oe.b)((function(e){return{preview:e.preview,debug:e.debug}}))(ot((function(e){var t=e.preview,n=e.debug;e.deps;return t?v.a.createElement(wt,{className:_()(xt.a.root,n?xt.a.enabled:null),onClick:function(e){e.stopPropagation(),ae.c.toggleDebug()}},v.a.createElement(_t.a,{size:20,color:"white"})):null}))),Ct=n(19),Tt=n.n(Ct),At=function(e){var t=e.viewportRef,n=Object(m.useState)(!1),r=Object(i.a)(n,2),a=r[0],o=r[1];return Object(m.useEffect)((function(){var e=function(){a!==Tt.a.isFullscreen&&o(Tt.a.isFullscreen)};return Tt.a.isEnabled&&Tt.a.on("change",e),function(){Tt.a.isEnabled&&Tt.a.off("change",e)}}),[a]),Tt.a.isEnabled?v.a.createElement(wt,{onClick:function(e){if(e.stopPropagation(),a)Tt.a.exit();else{if(!t.current)return;Tt.a.request(t.current)}o(!a)}},a?v.a.createElement(_t.c,{size:24,color:"white"}):v.a.createElement(_t.b,{size:24,color:"white"})):null},St=n(43),Mt=n.n(St),Rt=Object(Oe.b)((function(e){return{title:e.title,author:e.author}}))(ot((function(e){var t=e.deps,n=e.title,r=e.author,a=e.viewportRef,o=t(K.a);return v.a.createElement("div",{className:Mt.a.root},v.a.createElement("span",{className:Mt.a.tease},n),v.a.createElement("span",{className:Mt.a.author},v.a.createElement("button",{className:Mt.a.authorButton,onClick:function(){return o.call("goToAuthor")}},r)),v.a.createElement("div",{style:{flex:1}}),v.a.createElement(Et,null),v.a.createElement(Nt,null),v.a.createElement(kt,null),v.a.createElement(At,{viewportRef:a}))}))),Bt=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={error:null},n.viewportRef=Object(m.createRef)(),n}return Object(b.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.deps;return v.a.createElement(Oe.a,{store:ae.b},v.a.createElement(rt,{value:e},v.a.createElement(Rt,{viewportRef:this.viewportRef}),v.a.createElement(mt,{viewportRef:this.viewportRef})))}}]),t}(m.Component),Lt=z()("eos:host:EosHost"),Qt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(f.a)(this,Object(d.a)(t).call(this))).handleGlobalClick=function(){n.emit("continue")},n.handleGlobalKeydown=function(e){32===e.which&&n.emit("continue")},n.getPageNames=function(){return n.pageNames},n._deps=e,n.modules={},n.pages={},n.pageNames=[],n.currentPage=null,n.startPageId="start",n.startPage=null,n.virtualMachine=n._deps(L.b),n.outerSandbox=n._deps(K.a),n.animator=n._deps(Ve),n.actionQueue=n._deps(B.a),n.script=n._deps(We.a),document.body.addEventListener("keydown",n.handleGlobalKeydown.bind(Object(p.a)(n))),n}return Object(b.a)(t,e),Object(l.a)(t,[{key:"setStartPage",value:function(e){this.startPageId=e}},{key:"load",value:function(){var e=this;(function(){var t,n,r,a,o;return u.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return e.animator.start(),(t=document.querySelector("#eosScriptPreloader > p")).textContent="Loading script",i.next=5,u.a.awrap(e.script.load());case 5:if(n=i.sent,t.textContent="Loading modules",!n.modules){i.next=16;break}r=0,a=Object.keys(n.modules);case 9:if(!(r<a.length)){i.next=16;break}return o=a[r],i.next=13,u.a.awrap(e.loadModule(o,n.modules[o]));case 13:r++,i.next=9;break;case 16:return e.pages=n.pages,e.pageNames=Object.keys(n.pages),e.initVirtualMachine(),n.init&&e.virtualMachine.eval(n.init),t.textContent="Loading media",i.next=23,u.a.awrap(e.preloadPage(e.startPageId,1));case 23:return e.startPage=i.sent,e.removePreloader(),i.next=27,u.a.awrap(new Promise((function(t){Ke.a.render(v.a.createElement(Bt,{host:e,deps:e._deps}),document.getElementById("eosContainer"),t)})));case 27:case"end":return i.stop()}}))})().catch((function(e){console.error("script error:",e)}))}},{key:"initVirtualMachine",value:function(){var e,t=this;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:e=[].concat(Object.values(o).map((function(e){return t._deps(e)})).map((function(e){return e.init.bind(e)})),Object.values(this.modules).map((function(e){return e.vm})).filter(Boolean)),this.virtualMachine.init(e);case 2:case"end":return n.stop()}}),null,this)}},{key:"runScript",value:function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.startPage){e.next=3;break}return Lt("could not start tease because start page is undefined - this could be because the tease was already started"),e.abrupt("return");case 3:Lt("start tease"),ae.c.start(),this.startPage.show(),this.startPage=null;case 7:case"end":return e.stop()}}),null,this)}},{key:"loadModule",value:function(e,t){var n;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(a[e+"Module"]){t.next=2;break}throw new Error("Invalid module: "+e);case 2:return t.next=4,u.a.awrap(a[e+"Module"]());case 4:return n=t.sent,t.next=7,u.a.awrap(n.default(this._deps));case 7:this.modules[e]=t.sent,console.info("loaded module:",e);case 9:case"end":return t.stop()}}),null,this)}},{key:"removePreloader",value:function(){var e=document.getElementById("eosScriptPreloader");e.parentNode.removeChild(e)}},{key:"getPage",value:function(e){var t=this,n=this.pages[e];if(n){var r=[],a=new Map,o=!1,i=!1,c=function(e){if(t.pages[e]){if(a.get(e))return a.get(e);for(var n={id:e},r=["preload","unload","show"],o=function(){var a=c[i];n[a]=function(){var o=t.getPage(e),i=!0,c=!1,u=void 0;try{for(var s,l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var f=s.value;n[f]=o[f]}}catch(d){c=!0,u=d}finally{try{i||null==l.return||l.return()}finally{if(c)throw u}}return n[a]()}},i=0,c=r;i<c.length;i++)o();return a.set(e,n),n}Lt("page %s not found",e)},s=function(e){var n=U.a.filter(e);return t.pageNames.filter(n).map(c)},l=function(){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o){t.next=2;break}return t.abrupt("return",o);case 2:return Lt("preload page %s",e),o=Promise.all(r.map((function(e){return e.load()}))),t.next=6,u.a.awrap(o);case 6:case"end":return t.stop()}}))},f=n.map((function(e){return function e(n){var a=Object.keys(n)[0],o=t.getCommandByType(a);if("function"!==typeof o)throw new Error("Invalid command: "+a);var i=Object.assign({type:a,opts:n[a],load:function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))},unload:function(){},run:function(){},render:null},o({deps:t._deps,host:t,opts:n[a],getCommand:e,getPage:c,getPagesByGlob:s}));return r.push(i),i}(e)})),d={id:e,preload:l,unload:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(Lt("unload page %s",e),i){var n=!0,o=!1,c=void 0;try{for(var u,s=a.values()[Symbol.iterator]();!(n=(u=s.next()).done);n=!0){var l=u.value;-1===t.indexOf(l.id)&&l.unload()}}catch(v){o=!0,c=v}finally{try{n||null==s.return||s.return()}finally{if(o)throw c}}}var f=!0,d=!1,p=void 0;try{for(var b,h=r[Symbol.iterator]();!(f=(b=h.next()).done);f=!0){var m=b.value;m.unload()}}catch(v){d=!0,p=v}finally{try{f||null==h.return||h.return()}finally{if(d)throw p}}a=new Map},show:function(){return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return Lt("show page %s",e),i=!0,ae.c.leavePage(),t.actionQueue.stopQueue(),t.actionQueue.clearQueue(),n.next=7,u.a.awrap(l());case 7:return Array.from(a.values()).forEach((function(e){e.preload().catch((function(t){console.error("Error preloading page "+e.id+": "+(t&&t.stack?t.stack:t))}))})),t.currentPage&&t.currentPage.unload([e]),ae.c.gotoPage(e),t.currentPage=d,t.emit("page",e),n.abrupt("return",t.actionQueue.setQueue(f));case 13:case"end":return n.stop()}}))}};return d}}},{key:"preloadPage",value:function(e){var t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t=this.getPage(e))){n.next=4;break}return n.next=4,u.a.awrap(t.preload());case 4:return n.abrupt("return",t);case 5:case"end":return n.stop()}}),null,this)}},{key:"preloadCommand",value:function(e){var t,n,r=arguments;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!((t=r.length>1&&void 0!==r[1]?r[1]:0)<0)){a.next=3;break}return a.abrupt("return");case 3:if("function"!==typeof(n=this.getCommand(e)).preload){a.next=7;break}return a.next=7,u.a.awrap(n.preload({depth:t}));case 7:return a.abrupt("return",n);case 8:case"end":return a.stop()}}),null,this)}},{key:"showPage",value:function(e){var t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(ae.c.gotoPage(e),this.pages[e]){n.next=3;break}throw new Error("No such page: "+e);case 3:return t=this.getPage(e),n.prev=4,n.next=7,u.a.awrap(t.show());case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(4),console.error(n.t0,"(page ".concat(e,")"));case 12:case"end":return n.stop()}}),null,this,[[4,9]])}},{key:"runCommands",value:function(e){return this.actionQueue.setQueue(e)}},{key:"getCommandByType",value:function(e){if(-1!==e.indexOf(".")){var t=e.split("."),n=Object(i.a)(t,2),a=n[0],o=n[1];if(!this.modules[a])throw new Error("Module not available: "+a);return this.modules[a].commands[o+"Command"]}return r[e+"Command"]}}]),t}(qe.EventEmitter),Dt=t.a=Qt},54:function(e,t,n){e.exports={root:"BlinkyTriangle_root__1cyox",pulse:"BlinkyTriangle_pulse__3YeTT",inner:"BlinkyTriangle_inner__3RqhK",debug:"BlinkyTriangle_debug__bxlFM",move:"BlinkyTriangle_move__1DocI"}},55:function(e,t,n){e.exports={root:"SplashScreen_root__3vtZk",start:"SplashScreen_start__1C1S7",blinky:"SplashScreen_blinky__2o3So"}},65:function(e,t,n){e.exports={root:"ChoiceBubble_root__38cRB",button:"ChoiceBubble_button__1Ldsc"}},67:function(e,t,n){e.exports={root:"Picture_root__1KcRX",picture:"Picture_picture__1i_KS"}},70:function(e,t,n){e.exports={root:"ToolbarButton_root__3rVYt",hide:"ToolbarButton_hide__1GelM"}},71:function(e,t,n){e.exports={enabled:"DebugButton_enabled__3z0MU"}},72:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(2),i=n(3),c=n(16),u=n(52),s=n(8),l=n(30),f=n.n(l),d={"image/jpeg":"jpg","audio/mpeg":"mp3"},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"l";return"https://media.milovana.com/timg/tb_".concat(t,"/").concat(e,".jpg")},b=function(e,t){return"https://media.milovana.com/timg/".concat(e,".").concat(d[t])},h=n(15),m=n.n(h)()("eos:host:Preloader"),v=function(){function e(t){Object(o.a)(this,e),this._cache={},this.script=t(u.a),this.outerSandbox=t(c.a)}return Object(i.a)(e,[{key:"resolveLocator",value:function(e){var t=e.locator,n=e.type,r=e.size,a=void 0===r?"s":r,o=t&&function(e,t){var n=t.files,r=t.galleries,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e.startsWith("gallery:")){var o=e.slice("gallery:".length).split("/"),i=Object(s.a)(o,2),c=i[0],u=i[1],l=r[c];if(l)return Object.assign({type:"image/jpeg"},"*"===u?l.images[Math.floor(Math.random()*l.images.length)]:l.images.find((function(e){return e.id===Number(u)})))}else if(e.startsWith("file:")){var d=f.a.filter(e.slice("file:".length)),p=Object.keys(n).filter(d).map((function(e){return Object.assign({name:e},n[e])})).filter((function(e){return!a||e.type===a}));return p[Math.floor(Math.random()*p.length)]}}(t,this.script.getScript(),n);return{id:"".concat(n,":").concat(a,":").concat(o.hash),href:o&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"l";return"image/jpeg"===t?p(e,n):b(e,t)}(o.hash,o.type,a)}}},{key:"preload",value:function(e){var t,n;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.id,n=e.href,!this._cache[t]){r.next=4;break}return this._cache[t].refCount++,r.abrupt("return",this._cache[t].objUrl);case 4:return m("create %s",t),this._cache[t]={refCount:1,objUrl:this.load({href:n})},r.abrupt("return",this._cache[t].objUrl);case 7:case"end":return r.stop()}}),null,this)}},{key:"revoke",value:function(e){var t=e.id;this._cache[t]&&(this._cache[t].refCount--,this._cache[t].refCount<=0&&(m("revoke %s",t),URL.revokeObjectURL(this._cache[t].objUrl),delete this._cache[t],m("current cache %j",this._cache)))}},{key:"load",value:function(e){var t,n,r,o;return a.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(t=e.href){i.next=3;break}return i.abrupt("return",void 0);case 3:return i.next=5,a.a.awrap(fetch(t));case 5:return n=i.sent,i.next=8,a.a.awrap(n.blob());case 8:return r=i.sent,o=URL.createObjectURL(r),i.abrupt("return",o);case 11:case"end":return i.stop()}}))}}]),e}();t.a=v},74:function(e,t,n){"use strict";var r=n(4),a=n(0),o=n.n(a),i=n(101),c=n.n(i),u=n(7),s=n.n(u);t.a=function(e){var t=e.children,n=e.className,a=Object(r.a)(e,["children","className"]);return o.a.createElement("div",Object.assign({className:s()(c.a.root,n)},a),t)}},9:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return v}));var r,a=n(6),o=n(13),i=n(4),c=n(11),u=n(39),s=n(12),l={start:Object(s.createAction)("start"),load:Object(s.createAction)("load"),leavePage:Object(s.createAction)("leave page"),gotoPage:Object(s.createAction)("goto page"),setBackgroundColor:Object(s.createAction)("set background color"),setMedia:Object(s.createAction)("set media"),addBubble:Object(s.createAction)("add bubble"),addActivity:Object(s.createAction)("add activity"),addPageElement:Object(s.createAction)("add page element"),addUiElement:Object(s.createAction)("add ui element"),toggleDebug:Object(s.createAction)("toggle debug")},f={started:!1,title:"",author:"",preview:!1,script:{},page:"",pageElements:[],uiElements:[],bubbles:[],activities:[],statusEffects:[],debug:!1},d=0,p=(r={},Object(a.a)(r,l.start,(function(e){return Object(c.a)({},e,{started:!0})})),Object(a.a)(r,l.load,(function(e,t){var n=t.title,r=t.author,a=t.script,o=t.preview;return Object(c.a)({},e,{title:n,author:r,script:a,preview:o,debug:o})})),Object(a.a)(r,l.leavePage,(function(e){return Object(c.a)({},e,{pageElements:[],bubbles:[],activities:[]})})),Object(a.a)(r,l.gotoPage,(function(e,t){return Object(c.a)({},e,{page:t,pageElements:[],bubbles:[]})})),Object(a.a)(r,l.setBackgroundColor,(function(e,t){return Object(c.a)({},e,{backgroundColor:t})})),Object(a.a)(r,l.setMedia,(function(e,t){return Object(c.a)({},e,{media:t})})),Object(a.a)(r,l.addBubble,(function(e,t){var n=e.bubbles,r=Object(i.a)(e,["bubbles"]);return Object(c.a)({},r,{bubbles:[].concat(Object(o.a)(n),[{key:d++,Component:t}])})})),Object(a.a)(r,l.addActivity,(function(e,t){var n=e.activities,r=Object(i.a)(e,["activities"]);return Object(c.a)({},r,{activities:[].concat(Object(o.a)(n),[{key:d++,Component:t}])})})),Object(a.a)(r,l.addPageElement,(function(e,t){var n=e.pageElements,r=Object(i.a)(e,["pageElements"]);return Object(c.a)({},r,{pageElements:[].concat(Object(o.a)(n),[{key:d++,Component:t}])})})),Object(a.a)(r,l.addUiElement,(function(e,t){var n=e.uiElements,r=Object(i.a)(e,["uiElements"]);return Object(c.a)({},r,{uiElements:[].concat(Object(o.a)(n),[{key:d++,Component:t}])})})),Object(a.a)(r,l.toggleDebug,(function(e){var t=e.debug,n=Object(i.a)(e,["debug"]);return Object(c.a)({},n,{debug:!t})})),r),b=Object(s.createReducer)(p,f),h=Object(u.b)(b,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p=Object(c.a)({},p,{},e),f=Object(c.a)({},f,{},t);var n=Object(s.createReducer)(p,f);h.replaceReducer(n)};t.b=h;var v=Object(u.a)(l,h.dispatch)},98:function(e,t,n){"use strict";var r=n(8),a=n(0),o=n.n(a),i=n(99),c=n(10),u=n(14),s=n.n(u);t.a=Object(c.b)((function(e){return{debug:e.debug}}))((function(e){var t=e.debug,n=e.duration,c=e.style,u=e.onComplete,l=Object(a.useState)(!1),f=Object(r.a)(l,2),d=f[0],p=f[1],b=Object(i.a)(n)*n,h=function(){d||(p(!0),u&&u())};if(d)return null;if(b>=n)return h(),null;var m="",v=Math.ceil((n-b)/1e3),g=Math.floor(v/3600),y=Math.floor(v%3600/60),E=v%60;v>=3600&&(m+=g+":"+(y>=10?"":"0")),v>=60&&(m+=y+":"+(E>=10?"":"0")),m+=E;if("hidden"===c)return t?o.a.createElement("div",{className:s.a.root},o.a.createElement("button",{className:s.a.skip,onClick:h}),o.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 ".concat(120," ").concat(120)}),o.a.createElement("div",{className:s.a.label},"Hidden\xa0",o.a.createElement("span",{className:s.a.debugText},"(",m,")"))):o.a.createElement("div",null);if("secret"===c)return o.a.createElement("div",{className:s.a.root},t?o.a.createElement("button",{className:s.a.skip,onClick:h}):null,o.a.createElement("svg",{className:s.a.secretTimer,width:"100%",height:"100%",viewBox:"0 0 ".concat(120," ").concat(120)},o.a.createElement("circle",{cx:60,cy:60,r:60,fill:"rgba(0,0,0,0.8)"}),o.a.createElement("circle",{cx:60,cy:60,r:50,stroke:"rgb(201, 86, 93)",strokeWidth:10,strokeDasharray:"54,360",strokeLinecap:"round",fill:"none"})),o.a.createElement("div",{className:s.a.label},"?",t?o.a.createElement("span",{className:s.a.debugText},"\xa0(",m,")"):null));var _,O=50,j=360/n*b,w=(90-j)*Math.PI/180,k=60+O*Math.cos(w),P=60-O*Math.sin(w);return _=n===b?"M ".concat(60,",").concat(10," A ").concat(O,",").concat(O," 0,1,1 ").concat(59.99,",").concat(10):"M ".concat(60,",").concat(10," A ").concat(O,",").concat(O," 0,").concat(+(j>180),",1 ").concat(k,",").concat(P),o.a.createElement("div",{className:s.a.root},t?o.a.createElement("button",{className:s.a.skip,onClick:h}):null,o.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 ".concat(120," ").concat(120)},o.a.createElement("circle",{cx:60,cy:60,r:60,fill:"rgba(0,0,0,0.8)"}),o.a.createElement("path",{d:_,stroke:"rgb(201, 86, 93)",strokeWidth:10,strokeLinecap:"round",fill:"none"})),o.a.createElement("div",{className:s.a.label},m))}))},99:function(e,t,n){"use strict";var r=n(8),a=n(0);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e12,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(a.useState)(0),o=Object(r.a)(n,2),i=o[0],c=o[1];return Object(a.useLayoutEffect)((function(){var n,r,a,o=function(){var t=Math.min(1,(Date.now()-a)/e);c(t),i()},i=function(){n=requestAnimationFrame(o)},u=setTimeout((function(){r=setTimeout((function(){cancelAnimationFrame(n),c(1)}),e),a=Date.now(),i()}),t);return function(){clearTimeout(r),clearTimeout(u),cancelAnimationFrame(n)}}),[e,t]),i}}},[[114,1,2]]]);
//# sourceMappingURL=main.73a43e4b.chunk.js.map