(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,n){e.exports={root:"ChoiceBubble_root__1zrlW",button:"ChoiceBubble_button__Y0b9q"}},109:function(e,t,n){e.exports={root:"Picture_root__3EnrU",picture:"Picture_picture__CdVX_"}},110:function(e,t,n){e.exports={root:"BlinkyTriangle_root__2NPE8",pulse:"BlinkyTriangle_pulse__1cn-M",inner:"BlinkyTriangle_inner__3OdaG",move:"BlinkyTriangle_move__rBa-Y"}},112:function(e,t,n){e.exports={root:"ToolbarButton_root__1QkpH",hide:"ToolbarButton_hide__1a320"}},113:function(e,t,n){e.exports={enabled:"DebugButton_enabled__1l91i"}},114:function(e,t,n){"use strict";var r=n(1),a=n.n(r),i=n(5),o=n(2),c=n(3),u=n(19),s=n(79),l=n(8),f=n(40),p=n.n(f),d={"image/jpeg":"jpg","audio/mpeg":"mp3"},b=function(e,t){var n=t.files,r=t.galleries,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e.startsWith("gallery:")){var i=e.slice("gallery:".length).split("/"),o=Object(l.a)(i,2),c=o[0],u=o[1],s=r[c];if(s)return Object.assign({type:"image/jpeg"},"*"===u?s.images[Math.floor(Math.random()*s.images.length)]:s.images.find(function(e){return e.id===Number(u)}))}else if(e.startsWith("file:")){var f=p.a.filter(e.slice("file:".length)),d=Object.keys(n).filter(f).map(function(e){return Object.assign({name:e},n[e])}).filter(function(e){return!a||e.type===a});return d[Math.floor(Math.random()*d.length)]}},h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"l";return"image/jpeg"===t?m(e,n):v(e,t)},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"l";return"https://media.milovana.com/timg/tb_".concat(t,"/").concat(e,".jpg?origin=").concat(window.location.origin)},v=function(e,t){return"https://media.milovana.com/timg/".concat(e,".").concat(d[t],"?origin=").concat(window.location.origin)},g=n(18),y=n.n(g)()("eos:host:Preloader"),E=function(){function e(t){Object(o.a)(this,e),this._cache={},this.script=t(s.a),this.outerSandbox=t(u.a)}return Object(c.a)(e,[{key:"preload",value:function(){var e=Object(i.a)(a.a.mark(function e(t){var n,r,i,o,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.locator,r=t.type,i=t.size,c=r+":"+(o=void 0===i?"s":i)+":"+n,!this._cache[c]){e.next=5;break}return this._cache[c].refCount++,e.abrupt("return",this._cache[c].objUrl);case 5:if(!(-1!==n.indexOf("*"))){e.next=10;break}return e.abrupt("return",this.load({locator:n,type:r,size:o}));case 10:return y("create %s",c),this._cache[c]={refCount:1,objUrl:this.load({locator:n,type:r,size:o})},e.abrupt("return",this._cache[c].objUrl);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"revoke",value:function(e){var t=e.locator,n=e.type,r=e.size,a=n+":"+(void 0===r?"s":r)+":"+t;this._cache[a]&&(this._cache[a].refCount--,this._cache[a].refCount<=0&&(y("revoke %s",a),URL.revokeObjectURL(this._cache[a].objUrl),delete this._cache[a],y("current cache %j",this._cache)))}},{key:"load",value:function(){var e=Object(i.a)(a.a.mark(function e(t){var n,r,i,o,c,u,s,l;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.locator,r=t.type,i=t.size,o=n&&b(n,this.script.getScript(),r)){e.next=4;break}return e.abrupt("return",void 0);case 4:return c=h(o.hash,o.type,i),e.next=7,fetch(c);case 7:return u=e.sent,e.next=10,u.blob();case 10:return s=e.sent,l=URL.createObjectURL(s),e.abrupt("return",l);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();t.a=E},116:function(e,t,n){"use strict";var r=n(4),a=n(0),i=n.n(a),o=n(170),c=n.n(o),u=n(7),s=n.n(u);t.a=function(e){var t=e.children,n=e.className,a=Object(r.a)(e,["children","className"]);return i.a.createElement("div",Object.assign({className:s()(c.a.root,n)},a),t)}},162:function(e,t,n){"use strict";var r=n(8),a=n(0),i=n.n(a),o=n(163),c=n(13),u=n(17),s=n.n(u);t.a=Object(c.b)(function(e){return{debug:e.debug}})(function(e){var t=e.debug,n=e.duration,c=e.style,u=e.onComplete,l=Object(a.useState)(!1),f=Object(r.a)(l,2),p=f[0],d=f[1],b=Object(o.a)(n)*n,h=function(){p||(d(!0),u&&u())};if(p)return null;if(b>=n)return h(),null;var m="",v=Math.ceil((n-b)/1e3),g=Math.floor(v/3600),y=Math.floor(v%3600/60),E=v%60;v>=3600&&(m+=g+":"+(y>=10?"":"0")),v>=60&&(m+=y+":"+(E>=10?"":"0")),m+=E;if("hidden"===c)return t?i.a.createElement("div",{className:s.a.root},i.a.createElement("button",{className:s.a.skip,onClick:h}),i.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 ".concat(120," ").concat(120)}),i.a.createElement("div",{className:s.a.label},"Hidden\xa0",i.a.createElement("span",{className:s.a.debugText},"(",m,")"))):i.a.createElement("div",null);if("secret"===c)return i.a.createElement("div",{className:s.a.root},t?i.a.createElement("button",{className:s.a.skip,onClick:h}):null,i.a.createElement("svg",{className:s.a.secretTimer,width:"100%",height:"100%",viewBox:"0 0 ".concat(120," ").concat(120)},i.a.createElement("circle",{cx:60,cy:60,r:60,fill:"rgba(0,0,0,0.8)"}),i.a.createElement("circle",{cx:60,cy:60,r:50,stroke:"rgb(201, 86, 93)",strokeWidth:10,strokeDasharray:"54,360",strokeLinecap:"round",fill:"none"})),i.a.createElement("div",{className:s.a.label},"?",t?i.a.createElement("span",{className:s.a.debugText},"\xa0(",m,")"):null));var O,_=50,j=360/n*b,k=(90-j)*Math.PI/180,w=60+_*Math.cos(k),P=60-_*Math.sin(k);return O=n===b?"M ".concat(60,",").concat(10," A ").concat(_,",").concat(_," 0,1,1 ").concat(59.99,",").concat(10):"M ".concat(60,",").concat(10," A ").concat(_,",").concat(_," 0,").concat(+(j>180),",1 ").concat(w,",").concat(P),i.a.createElement("div",{className:s.a.root},t?i.a.createElement("button",{className:s.a.skip,onClick:h}):null,i.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 ".concat(120," ").concat(120)},i.a.createElement("circle",{cx:60,cy:60,r:60,fill:"rgba(0,0,0,0.8)"}),i.a.createElement("path",{d:O,stroke:"rgb(201, 86, 93)",strokeWidth:10,strokeLinecap:"round",fill:"none"})),i.a.createElement("div",{className:s.a.label},m))})},163:function(e,t,n){"use strict";var r=n(8),a=n(0);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e12,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(a.useState)(0),i=Object(r.a)(n,2),o=i[0],c=i[1];return Object(a.useLayoutEffect)(function(){var n,r,a,i=function(){var t=Math.min(1,(Date.now()-a)/e);c(t),o()},o=function(){n=requestAnimationFrame(i)},u=setTimeout(function(){r=setTimeout(function(){cancelAnimationFrame(n),c(1)},e),a=Date.now(),o()},t);return function(){clearTimeout(r),clearTimeout(u),cancelAnimationFrame(n)}},[e,t]),o}},165:function(e,t,n){"use strict";var r=n(2),a=n(3),i=function(){function e(){Object(r.a)(this,e),this.callbacks=[]}return Object(a.a)(e,[{key:"registerInteractionCallback",value:function(e){if("function"!==typeof e)throw new TypeError("callback must be a function");this.callbacks.push(e)}},{key:"runInteractionCallbacks",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.callbacks[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){(0,r.value)()}}catch(i){t=!0,n=i}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}this.callbacks=[]}}]),e}();t.a=i},17:function(e,t,n){e.exports={root:"TimerDisplay_root__2wjdF",label:"TimerDisplay_label__2EY5i",secretTimer:"TimerDisplay_secretTimer__3wn0o","unknown-timer-rotate":"TimerDisplay_unknown-timer-rotate__22NFk",eosSecretTimerBackground:"TimerDisplay_eosSecretTimerBackground__K5fYl",skip:"TimerDisplay_skip__1qtJc",debugText:"TimerDisplay_debugText__3yo1o"}},170:function(e,t,n){e.exports={root:"Button_root__pg9yR"}},171:function(e,t,n){e.exports={root:"Bubble_root__3GLWY"}},172:function(e,t,n){e.exports={root:"SingleBubble_root__5Kjke"}},178:function(e,t,n){e.exports={root:"BubbleQueue_root__7iglX","fade-in":"BubbleQueue_fade-in__3SRSM"}},180:function(e,t,n){e.exports={root:"ActivitiesBar_root__1wXBI"}},181:function(e,t,n){e.exports={root:"Background_root__1LZJ2"}},182:function(e,t,n){e.exports={root:"Viewport_root__1jQoK"}},184:function(e,t,n){e.exports=n(185)},185:function(e,t,n){"use strict";n.r(t);var r=n(18),a=n.n(r),i=n(80),o=n(183),c=n.n(o),u=n(57);n(406),n(408);u.init({dsn:"https://23d05799b8634b06bba3ab639538288c@sentry.io/1310432",environment:"production"});var s=i.a.deps=c()(),l=i.a.host=s(i.a);if(window.URLSearchParams){var f=new URLSearchParams(window.location.search),p=f.get("debug");p&&a.a.enable(p);var d=f.get("start");d&&l.setStartPage(d)}l.load()},19:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(1),a=n.n(r),i=n(5),o=n(2),c=n(3),u=function(){function e(){Object(o.a)(this,e),this.unique=0,this.callbacks=[],window.addEventListener("message",this.handleMessage.bind(this))}return Object(c.a)(e,[{key:"call",value:function(){var e=Object(i.a)(a.a.mark(function e(t,n){var r=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,a){var i=r.unique++;r.callbacks[i]={resolve:e,reject:a},window.parent.postMessage({jsonrpc:"2.0",method:t,params:n,id:i},"*")}));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleMessage",value:function(e){var t=e.data,n=t.jsonrpc,r=t.result,a=t.error,i=t.id;if(("string"!==typeof e.data.type||!e.data.type.startsWith("webpack"))&&"2.0"===n)if("undefined"!==typeof i)if(this.callbacks[i]){var o=this.callbacks[i],c=o.resolve,u=o.reject;delete this.callbacks[i],"undefined"!==typeof r?c(r):"undefined"!==typeof a?u(new Error(a.message)):console.error("malformed rpc response from parent, no result or error given. id="+i)}else console.error("malformed rpc message from parent, wrong id or id used twice.");else console.error("malformed rpc message from parent, no id specified.")}}]),e}()},212:function(e,t){},214:function(e,t){},25:function(e,t,n){"use strict";var r=n(1),a=n.n(r),i=n(5),o=n(16),c=n(2),u=n(3);var s=function e(){Object(c.a)(this,e)};function l(e){if(!(t=e)||"object"!==typeof t&&"function"!==typeof t||"function"!==typeof t.then)throw new TypeError("makeCancelable must receive a promise");var t,n,r=new Promise(function(t,r){n=function(){return r(new s)},e.then(function(e){return t(e)},function(e){return r(e)})});return r.cancel=n,r}var f=n(9);n.d(t,"a",function(){return p});var p=function(){function e(t){Object(c.a)(this,e),this.currentActionPromise=null,this.actionQueue=[]}return Object(u.a)(e,[{key:"setQueue",value:function(e){this.stopQueue(),this.clearQueue(),this.actionQueue=e.slice(),this.startQueue()}},{key:"appendQueue",value:function(e){this.actionQueue=[].concat(Object(o.a)(this.actionQueue),Object(o.a)(e))}},{key:"prependQueue",value:function(e){this.actionQueue=[].concat(Object(o.a)(e),Object(o.a)(this.actionQueue))}},{key:"interrupt",value:function(e){this.stopQueue(),this.prependQueue(e),this.startQueue()}},{key:"startQueue",value:function(){var e=this;this.currentActionPromise||Object(i.a)(a.a.mark(function t(){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.actionQueue.length){t.next=12;break}if(!(n=e.actionQueue.shift()).prerender){t.next=6;break}return e.currentActionPromise=l(Promise.resolve(n.prerender())),t.next=6,e.currentActionPromise;case 6:return n.render&&("bubbles"===n.renderParent?f.c.addBubble(n.render):"activities"===n.renderParent?f.c.addActivity(n.render):"statusEffects"===n.renderParent?f.c.addStatusEffect(n.render):f.c.addPageElement(n.render)),e.currentActionPromise=l(Promise.resolve(n.run())),t.next=10,e.currentActionPromise;case 10:t.next=0;break;case 12:e.currentActionPromise=null;case 13:case"end":return t.stop()}},t,this)}))().catch(function(e){e instanceof s||console.error(e)})}},{key:"stopQueue",value:function(){this.currentActionPromise&&(this.currentActionPromise.cancel(),this.currentActionPromise=null)}},{key:"clearQueue",value:function(){this.actionQueue=[]}},{key:"peekNextAction",value:function(){return this.actionQueue[0]}}]),e}()},408:function(e,t,n){},55:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(11),a=n(173),i=n.n(a),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"!==typeof e?{__html:""}:i()(e,Object(r.a)({whiteList:{br:[],b:[],i:[],u:[],strong:[],em:[],p:["style"],span:["class","style"]},css:{whiteList:{color:!0,"text-align":!0,"font-size":!0,"letter-spacing":!0}}},t))}},58:function(e,t,n){e.exports={root:"PromptBubble_root__2JeKj",done:"PromptBubble_done__2C_y0",result:"PromptBubble_result__1_tDB",measure:"PromptBubble_measure__2qc1-"}},59:function(e,t,n){e.exports={root:"TextBubble_root__1bd0z",alignLeft:"TextBubble_alignLeft__2qgIP",alignRight:"TextBubble_alignRight__3npcz",continueIndicator:"TextBubble_continueIndicator__3SYan",cursor:"TextBubble_cursor__2BXeF"}},6:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(2),a=n(3),i=n(32),o=n(31),c=n(33),u=n(20),s=n(29),l=n(18),f=n.n(l),p=window.Interpreter,d=f()("eos:host:VirtualMachine"),b=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(i.a)(this,Object(o.a)(t).call(this))).init=e.init.bind(Object(u.a)(Object(u.a)(e))),e._interpreter=null,e}return Object(c.a)(t,e),Object(a.a)(t,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._interpreter=new p("");var t=!0,n=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;o(this._interpreter,this._interpreter.global)}}catch(c){n=!0,r=c}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}this.emit("init",this._interpreter,this._interpreter.global)}},{key:"eval",value:function(e){return d("eval: %s",e),this.emit("preEval",this._interpreter),this._interpreter.appendCode(e),this._interpreter.run(),this.emit("postEval",this._interpreter),this._interpreter.value}},{key:"dispatchEvent",value:function(e){var t=e.target,n=e.type,r=e.eventClass,a=void 0===r?"Event":r,i=this._interpreter.global.properties.EventTarget;if(!this._interpreter.isa(t,i))throw new TypeError("tried to dispatch an event on a non-EventTarget");this._interpreter.setProperty(i,"currentTarget",t),this._interpreter.appendCode("EventTarget.currentTarget.dispatchEvent(new ".concat(a,"('").concat(n,"'))")),this._interpreter.run()}}]),t}(s.EventEmitter);t.b=b},60:function(e,t,n){e.exports={root:"DebugInterface_root__1twEs",bar:"DebugInterface_bar__2Laj1",title:"DebugInterface_title__3Fjzq",page:"DebugInterface_page__eFUwn",contents:"DebugInterface_contents__jlmCX"}},61:function(e,t,n){e.exports={root:"TopBar_root__1EIeq",tease:"TopBar_tease__12JNd",author:"TopBar_author__2Ehos",authorButton:"TopBar_authorButton__3Sf_T"}},77:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(8),a=n(45),i=n.n(a),o=n(18),c=n.n(o)()("eos:host:command:timer"),u=function(e){if(-1!==e.indexOf("-")){var t=e.split("-").map(function(e){return new i.a(e).milliseconds()}),n=Object(r.a)(t,2),a=n[0],o=n[1],u=Math.random()*(o-a)+a;return c("random duration. min=%s max=%s chosen=%s",a,o,u),new i.a(u)}return new i.a(e)}},79:function(e,t,n){"use strict";var r=n(1),a=n.n(r),i=n(5),o=n(2),c=n(3),u=n(19),s=n(9),l=function(){function e(t){Object(o.a)(this,e),this.outerSandbox=t(u.a)}return Object(c.a)(e,[{key:"getTitle",value:function(){return this._title}},{key:"getAuthor",value:function(){return this._author}},{key:"getScript",value:function(){return this._script}},{key:"load",value:function(){var e=Object(i.a)(a.a.mark(function e(){var t,n,r,i,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.outerSandbox.call("load");case 2:return t=e.sent,n=t.title,r=t.author,i=t.script,o=t.preview,this._title=n,this._author=r,this._script=i,this._preview=o,s.c.load({title:n,author:r,script:i,preview:o}),e.abrupt("return",this._script);case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}();t.a=l},80:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"choiceCommand",function(){return D}),n.d(r,"disableCommand",function(){return H}),n.d(r,"enableCommand",function(){return X}),n.d(r,"endCommand",function(){return J}),n.d(r,"evalCommand",function(){return K}),n.d(r,"gotoCommand",function(){return $}),n.d(r,"ifCommand",function(){return Z}),n.d(r,"imageCommand",function(){return ce}),n.d(r,"promptCommand",function(){return be}),n.d(r,"sayCommand",function(){return xe}),n.d(r,"timerCommand",function(){return Ae});var a={};n.r(a),n.d(a,"nyxModule",function(){return Se}),n.d(a,"pcm2Module",function(){return Me}),n.d(a,"audioModule",function(){return Be}),n.d(a,"notificationModule",function(){return Re}),n.d(a,"storageModule",function(){return Le});var i={};n.r(i),n.d(i,"ConsoleVm",function(){return Qe}),n.d(i,"EventsVm",function(){return De}),n.d(i,"PagesVm",function(){return Ge});var o=n(8),c=n(1),u=n.n(c),s=n(5),l=n(2),f=n(3),p=n(32),d=n(31),b=n(33),h=n(20),m=n(0),v=n.n(m),g=n(116),y=n(4),E=n(7),O=n.n(E),_=n(171),j=n.n(_),k=function(e){var t=e.children,n=e.className,r=Object(y.a)(e,["children","className"]);return v.a.createElement("div",Object.assign({},r,{className:O()(n,j.a.root)}),t)},w=function(e){var t=e.children,n=Object(y.a)(e,["children"]);return v.a.createElement(k,n,t)},P=n(172),x=n.n(P),N=function(e){var t=e.children,n=e.className,r=Object(y.a)(e,["children","className"]);return v.a.createElement(k,Object.assign({className:O()(x.a.root,n)},r),t)},C=n(55),T=n(62),A=n.n(T),S=n(107),M=n.n(S),B=function(e){var t=e.options,n=e.onSelect,r=e.active,a=Object(m.useState)(null),i=Object(o.a)(a,2),c=i[0],u=i[1];return Object(m.useEffect)(function(){r||c||u({label:"\u22ef"})},[r]),c?v.a.createElement(N,{dangerouslySetInnerHTML:{__html:Object(C.a)("&gt; ".concat(c.label," &lt;"))}}):v.a.createElement(w,{className:M.a.root},t.map(function(e,t){var r=Object(C.a)(e.label);return v.a.createElement(g.a,{key:t,style:{backgroundColor:e.color||"#111"},className:M.a.button,onClick:function(){u(e),n(e)}},A()(r))}))},R=n(25),L=n(6),I=/<eval>([^<]*)<\/eval>/gi;var Q=function(){function e(t){Object(l.a)(this,e),this._virtualMachine=t(L.b)}return Object(f.a)(e,[{key:"resolve",value:function(e){var t=this;return e.replace(I,function(e,n){return n.length?t._virtualMachine.eval("("+(r=n,(new DOMParser).parseFromString(r,"text/html").documentElement.textContent)+")"):"";var r})}}]),e}(),D=function(e){var t,n=e.deps,r=e.opts,a=(e.host,e.getCommand),i=r.options,o=n(R.a),c=n(Q),u=i.map(function(e){var t=e.commands.map(function(e){return a(e)});return e.label=c.resolve(e.label),{label:e.label,visible:e.visible,color:e.color,preload:function(e){var n=e.depth;return Promise.all(t.map(function(e){return e.preload({depth:n})}))},run:function(){return o.prependQueue(t)}}}),s=new Promise(function(e){t=e});return{run:function(){return s},prerender:function(){var e=n(L.b);u=u.filter(function(t){return"string"===typeof t.visible&&"$"===t.visible[0]?Boolean(e.eval(t.visible.slice(1))):"boolean"!==typeof t.visible||t.visible})},render:function(e){var n=e.active;return v.a.createElement(B,{active:n,options:u,onSelect:function(e){e.run(),t()}})},renderParent:"bubbles"}},G=n(40),F=n.n(G),z=n(18),U=n.n(z),q=U()("eos:PageTracker"),V=function(){function e(t){Object(l.a)(this,e),this.host=t(It),this.runCounter=0,this.disabledPages=new Set,this.currentPage=null,this.host.on("page",this.handlePage.bind(this))}return Object(f.a)(e,[{key:"enable",value:function(e){var t=F.a.filter(e),n=this.host.getPageNames().filter(t);q("pattern %s enables %s page(s)",e,n.length);var r=!0,a=!1,i=void 0;try{for(var o,c=n[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var u=o.value;this.disabledPages.delete(u)}}catch(s){a=!0,i=s}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}}},{key:"disable",value:function(e){var t=F.a.filter(e),n=this.host.getPageNames().filter(t);q("pattern %s disables %s page(s)",e,n.length);var r=!0,a=!1,i=void 0;try{for(var o,c=n[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var u=o.value;this.disabledPages.add(u)}}catch(s){a=!0,i=s}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}}},{key:"isEnabled",value:function(e){return!this.disabledPages.has(e)}},{key:"getCurrentPageId",value:function(){return this.currentPage}},{key:"handlePage",value:function(e){this.runCounter++,this.currentPage=e}}]),e}(),H=function(e){var t=e.deps,n=e.opts.target,r=(e.host,t(V));return{run:function(){r.disable(n)}}},X=function(e){var t=e.deps,n=e.opts.target,r=(e.host,t(V));return{run:function(){r.enable(n)}}},W=n(19),J=function(e){e.host;var t=e.deps;e.opts;return{run:function(){t(W.a).call("openRatingDialog")}}},K=function(e){e.host;var t=e.deps,n=e.opts;return{run:function(){t(L.b).eval(n.script)}}},Y=function(e){return"string"===typeof e&&("!"===e[0]||(-1!==e.indexOf("*")||(-1!==e.indexOf("?")||(-1!==e.indexOf("{")||-1!==e.indexOf("(")))))},$=function(e){var t=e.deps,n=(e.host,e.opts),r=n.target,a=(Object(y.a)(n,["target"]),e.getPage),i=e.getPagesByGlob,o=t(V),c=function(e){var t=e.filter(function(e){return o.isEnabled(e.id)});if(0===t.length)throw new Error("No eligible pages for pattern: "+r);return t[Math.floor(Math.random()*t.length)]};if("$"===r[0]){return{run:function(){var e=t(L.b),n=r.slice(1),o=String(e.eval(n));if(Y(o)){var u=i(o);c(u).show()}else a(o).show()}}}if(Y(r)){var u=i(r);return{run:function(){c(u).show()}}}var s=a(r);return{run:function(){s.show()}}},Z=function(e){var t=e.deps,n=(e.host,e.opts),r=n.condition,a=n.commands,i=void 0===a?[]:a,o=e.getCommand,c=i.map(function(e){return o(e)});return{run:function(){var e=t(R.a);t(L.b).eval("!!("+r+")")&&c.length&&e.prependQueue(c)}}},ee=n(114),te=n(109),ne=n.n(te),re=function(e){var t=e.src;return v.a.createElement("div",{className:ne.a.root},v.a.createElement("img",{className:ne.a.picture,src:t,alt:""}))},ae=n(9),ie=n(175),oe=n.n(ie),ce=function(e){var t=e.deps,n=e.opts;n.size=n.size||"xl";var r,a=n.locator,i=n.size,o=t(ee.a);return{load:function(){var e=Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.preload({type:"image/jpeg",locator:a,size:i});case 2:r=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),run:function(){var e=Object(s.a)(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe.a.from(r).getPalette();case 3:t=e.sent,n=t.DarkMuted,ae.c.setBackgroundColor(n.getHex()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.warn("Could not detect background color: "+e.t0.stack);case 11:ae.c.setMedia(v.a.createElement(re,{src:r}));case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),unload:function(){o.revoke({type:"image/jpeg",locator:a,size:i})}}},ue=n(12),se=n(58),le=n.n(se),fe=function(e){var t=e.onSubmit,n=e.active,r=Object(m.useState)(!1),a=Object(o.a)(r,2),i=a[0],c=a[1],u=Object(m.useState)(""),s=Object(o.a)(u,2),l=s[0],f=s[1],p=Object(m.useRef)();Object(m.useEffect)(function(){var e=p.current;!i&&e&&(e.previousElementSibling.style.width=e.offsetWidth+"px")}),Object(m.useEffect)(function(){n||i||(f("".concat(l,"\u2026")),c(!0))},[n]);return v.a.createElement(N,{className:O()(le.a.root,Object(ue.a)({},le.a.done,i))},i?v.a.createElement("div",{className:le.a.result},"> ",l):v.a.createElement("form",{onSubmit:function(e){c(!0),e.preventDefault(),"function"===typeof t&&t(l)}},v.a.createElement("input",{onChange:function(e){return f(e.target.value)}}),v.a.createElement("div",{ref:p,className:le.a.measure},l)))},pe=n(176),de=n.n(pe),be=function(e){var t,n=e.deps,r=e.opts,a=n(L.b),i=new Promise(function(e){t=e});return{run:function(){return i},render:function(e){var n=e.active;return v.a.createElement(fe,{active:n,onSubmit:function(e){r.variable&&a.eval("".concat(r.variable," = '").concat(de()(e),"'")),t()}})},renderParent:"bubbles"}},he=function(e){return(new DOMParser).parseFromString(e,"text/html").body.textContent||""},me=function(e){return 1500+Math.max(30*he(e).length,300*function(e){return(he(e).trim().replace(/['";:,.?\xbf\-!\xa1]+/g,"").match(/\S+/g)||[]).length}(e))},ve=n(110),ge=n.n(ve),ye=function(e){var t=e.className,n=Object(y.a)(e,["className"]);return v.a.createElement("div",Object.assign({},n,{className:O()(ge.a.root,t)}),v.a.createElement("div",{className:ge.a.inner}))},Ee=n(59),Oe=n.n(Ee),_e=function(e){var t=e.children,n=e.className,r=e.align,a=Object(y.a)(e,["children","className","align"]);return v.a.createElement(N,Object.assign({},a,{className:O()(n,Oe.a.root,{left:Oe.a.alignLeft,right:Oe.a.alignRight}[r])}),t)},je=function(e){var t=e.children,n=e.className,r=Object(y.a)(e,["children","className"]);return v.a.createElement("div",Object.assign({className:O()(Oe.a.continueIndicator,n)},r),t)},ke=function(e){var t=e.label,n=e.align,r=e.onContinue,a=e.host,i=e.mode,c=e.duration,u=e.allowSkip,s=e.active,l=Object(m.useState)(!1),f=Object(o.a)(l,2),p=f[0],d=f[1],b=Object(m.useRef)(null);Object(m.useEffect)(function(){if(s){var e=function(){b.current&&!u||n()},n=function(){d(!0),r&&r(),a.removeListener("continue",e)};if(a.on("continue",e),r&&("autoplay"===i||"custom"===i)){var o="autoplay"===i?me(t):c;b.current=setTimeout(function(){n()},o)}return"instant"===i&&n(),function(){p||a.removeListener("continue",e),b.current&&clearTimeout(b.current)}}d(!0)},[s]);var h=Object(C.a)(t);return v.a.createElement(_e,{align:n},v.a.createElement("div",null,A()(h)),b.current||p||!s?null:v.a.createElement(je,null,v.a.createElement(ye,null)))},we=n(77),Pe=["prompt","choice"],xe=function(e){var t,n,r=e.deps,a=e.opts,i=e.host,o=new Promise(function(e){t=e});return{run:function(){return o},prerender:function(){var e=r(Q);n=e.resolve(a.label)},render:function(e){var o,c=e.active,u=r(R.a),s=Object(we.a)(a.duration||"0s"),l=a.mode&&"auto"!==a.mode?a.mode:(o=u.peekNextAction())&&(-1!==Pe.indexOf(o.type)||"timer"===o.type&&!o.opts.isAsync)?"instant":"pause";return v.a.createElement(ke,{active:c,label:n,mode:l,align:a.align||"center",allowSkip:a.allowSkip,duration:s.milliseconds(),host:i,onContinue:t})},renderParent:"bubbles"}},Ne=n(162),Ce=n(45),Te=n.n(Ce),Ae=function(e){e.host;var t,n,r=e.deps,a=e.opts,i=e.getCommand,o=r(R.a),c=(a.commands||[]).map(function(e){return i(e)}),l=new Promise(function(e){t=e});return{run:function(){var e=Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.isAsync&&t(),e.next=3,l;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),prerender:function(){if("$"===a.duration[0]){var e=r(L.b),t=a.duration.slice(1);n=new Te.a(Number(e.eval(t)))}else n=Object(we.a)(a.duration)},render:function(){return v.a.createElement(Ne.a,{duration:n.milliseconds(),style:a.style,onComplete:function(){c.length&&o.interrupt(c),t()}})},renderParent:"activities"}},Se=function(){return n.e(1).then(n.bind(null,436))},Me=function(){return n.e(2).then(n.bind(null,437))},Be=function(){return Promise.all([n.e(7),n.e(3)]).then(n.bind(null,439))},Re=function(){return n.e(4).then(n.bind(null,438))},Le=function(){return n.e(5).then(n.bind(null,435))},Ie=n(16),Qe=function(){function e(){Object(l.a)(this,e)}return Object(f.a)(e,[{key:"init",value:function(e,t){var n=this;this.CONSOLE=e.createObject(e.OBJECT),e.setProperty(t,"console",this.CONSOLE),["log","info","warn","error"].forEach(function(t){e.setProperty(n.CONSOLE,t,e.createNativeFunction(function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];var o,c;n=e.pseudoToNative(n),a=a.map(function(t){return e.pseudoToNative(t)}),"string"===typeof n?(o=console)[t].apply(o,["vm: "+n].concat(Object(Ie.a)(a))):(c=console)[t].apply(c,["vm:",n].concat(Object(Ie.a)(a)))}),L.a.NONENUMERABLE_DESCRIPTOR)})}}]),e}(),De=function(){function e(){Object(l.a)(this,e)}return Object(f.a)(e,[{key:"init",value:function(e,t){e.appendCode("\n      function EventTarget() {\n      }\n\n      Object.defineProperties(EventTarget.prototype, {\n        listeners: {\n          get: function () {\n            return this._listeners || []\n          }\n        }\n      })\n\n      EventTarget.prototype.addEventListener = function(type, newListener) {\n        var listeners\n        var listener\n\n        if (!type || !newListener) return\n\n        if (this._listeners === undefined) {\n          this._listeners = {}\n        }\n\n        listeners = this._listeners[type]\n\n        if (listeners === undefined) {\n          this._listeners[type] = listeners = []\n        }\n\n        for (var i = 0; !!(listener = listeners[i]); i++) {\n          if (listener === newListener) return\n        }\n\n        listeners.push(newListener)\n      }\n\n      EventTarget.prototype.removeEventListener = function(type, oldListener) {\n        var listeners\n        var listener\n\n        if (!type || !oldListener) {\n          return\n        }\n\n        if (this._listeners === undefined) return\n\n        listeners = this._listeners[type]\n\n        if (listeners === undefined) return\n\n        for (var i = 0; !!(listener = listeners[i]); i++) {\n          if (listener === oldListener) {\n            listeners.splice(i, 1)\n          }\n        }\n\n        if (listeners.length === 0) {\n          delete this._listeners[type]\n        }\n      }\n\n      EventTarget.prototype.dispatchEvent = function(event) {\n        var listeners\n        var stopImmediatePropagation = false\n        var listener\n\n        if (!event) {\n          throw new TypeError('parameter 1 is not of type \"Event\"')\n        }\n\n        event.stopImmediatePropagation = function() {\n          stopImmediatePropagation = true\n        }\n\n        listeners = ((this._listeners || {})[event.type] || [])\n\n        for (var i = 0; !!(listener = listeners[i]); i++) {\n          if (stopImmediatePropagation) break\n\n          try {\n            listener.call(this, event)\n          } catch (error) {\n            console.error(error)\n          }\n        }\n\n        return !event.defaultPrevented\n      }\n\n      function Event(type) {\n        this.type = type\n        this.timeStamp = Date.now()\n        this.cancelable = false\n      }\n    "),e.run()}}]),e}(),Ge=function(){function e(t){Object(l.a)(this,e),this.host=t(It),this.virtualMachine=t(L.b),this.pageTracker=t(V)}return Object(f.a)(e,[{key:"init",value:function(e,t){var n=this;this.PAGE_MANAGER=e.createNativeFunction(function(){throw new Error("Cannot construct PageManager object, use `pages` global")},!0),e.setProperty(this.PAGE_MANAGER,"prototype",e.createObject(t.properties.EventTarget),L.a.NONENUMERABLE_DESCRIPTOR),this.PAGE_MANAGER_PROTO=this.PAGE_MANAGER.properties.prototype,e.setProperty(t,"PageManager",this.PAGE_MANAGER);e.setNativeFunctionPrototype(this.PAGE_MANAGER,"isEnabled",function(e){if("string"!==typeof e)throw new TypeError("pageId must be a string");return n.pageTracker.isEnabled(e)}),e.setNativeFunctionPrototype(this.PAGE_MANAGER,"enable",function(e){if("string"!==typeof pageId)throw new TypeError("pattern must be a string");n.pageTracker.enable(e)}),e.setNativeFunctionPrototype(this.PAGE_MANAGER,"disable",function(e){if("string"!==typeof pageId)throw new TypeError("pattern must be a string");n.pageTracker.disable(e)}),e.setNativeFunctionPrototype(this.PAGE_MANAGER,"getCurrentPageId",function(){return n.pageTracker.getCurrentPageId()}),e.setNativeFunctionPrototype(this.PAGE_MANAGER,"goto",function(e){return n.host.showPage(e)}),this.PAGES=e.createObjectProto(this.PAGE_MANAGER_PROTO),e.setProperty(t,"pages",this.PAGES),this.host.on("page",function(){n.virtualMachine.dispatchEvent({target:n.PAGES,type:"change"})})}}]),e}(),Fe=n(29),ze=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(p.a)(this,Object(d.a)(t).call(this))).step=e.step.bind(Object(h.a)(Object(h.a)(e))),e}return Object(b.a)(t,e),Object(f.a)(t,[{key:"start",value:function(){window.requestAnimationFrame(this.step)}},{key:"step",value:function(){this.emit("step"),window.requestAnimationFrame(this.step)}}]),t}(Fe.EventEmitter),Ue=n(79),qe=n(177),Ve=n.n(qe),He=n(178),Xe=n.n(He),We=n(179),Je=function(e){var t=e.bubbles,n=Object(m.useRef)(),r=Object(m.useRef)(!1),a=Object(m.useRef)(0);return Object(m.useEffect)(function(){var e=function(e){var t=n.current;t.scrollTop<a.current?r.current=!0:t.scrollTop===t.scrollHeight-t.clientHeight&&(r.current=!1),a.current=t.scrollTop};return n.current.addEventListener("scroll",e),function(){n.current.removeEventListener("scroll",e)}},[]),Object(m.useEffect)(function(){var e=!r.current,t=n.current,a=t.scrollHeight-t.clientHeight;e&&Object(We.a)(t,{scrollTop:a+"px"},{easing:[.4,0,.2,1],duration:300})}),v.a.createElement("div",{ref:n,className:Xe.a.root},t.slice().map(function(e,n){var r=e.Component,a=e.key;return v.a.createElement(r,{key:a,active:n===t.length-1})}))},Ke=n(180),Ye=n.n(Ke),$e=function(e){var t=e.activities;return v.a.createElement("div",{className:Ye.a.root},t.map(function(e){var t=e.Component,n=e.key;return v.a.createElement(t,{key:n})}))},Ze=Object(m.createContext)(),et=Ze.Provider,tt=Ze.Consumer,nt=function(e){return function(t){var n=t.children,r=Object(y.a)(t,["children"]);return v.a.createElement(tt,null,function(t){return v.a.createElement(e,Object.assign({},r,{deps:t}),n)})}},rt=n(13),at=n(165),it=n(81),ot=n.n(it),ct=Object(rt.b)(function(e){return{title:e.title,author:e.author}})(nt(function(e){var t=e.deps,n=e.title,r=e.author,a=t(It),i=t(at.a);return v.a.createElement("div",{className:ot.a.root,onClick:function(){i.runInteractionCallbacks(),a.runScript()}},v.a.createElement("div",{style:{flex:2}}),v.a.createElement("h1",null,n),v.a.createElement("h2",null,"by ",r),v.a.createElement("div",{style:{flex:1}}),v.a.createElement("div",{className:ot.a.start},"Click to start"),v.a.createElement(ye,{className:ot.a.blinky}),v.a.createElement("div",{style:{flex:1}}))})),ut=n(11),st=n(181),lt=n.n(st),ft=function(e){var t=e.children,n=e.className,r=e.color,a=e.style,i=Object(y.a)(e,["children","className","color","style"]);return v.a.createElement("div",Object.assign({className:O()(lt.a.root,n),style:Object(ut.a)({backgroundColor:r},a)},i),t)},pt=n(182),dt=n.n(pt),bt=nt(Object(rt.b)(function(e){return{started:e.started,bubbles:e.bubbles,activities:e.activities,pageElements:e.pageElements,uiElements:e.uiElements,backgroundColor:e.backgroundColor,media:e.media}})(function(e){var t=e.viewportRef,n=e.bubbles,r=e.activities,a=e.pageElements,i=e.uiElements,o=e.backgroundColor,c=e.media,u=e.started,s=(0,e.deps)(It);return v.a.createElement("div",{className:dt.a.root,onClick:s.handleGlobalClick,ref:t},u?null:v.a.createElement(ct,null),v.a.createElement(ft,{color:o}),c,r.length?v.a.createElement($e,{activities:r}):null,n.length?v.a.createElement(Je,{bubbles:n}):null,a.map(function(e){var t=e.key,n=e.Component;return v.a.createElement(n,{key:t})}),i.map(function(e){var t=e.key,n=e.Component;return v.a.createElement(n,{key:t})}))})),ht=n(60),mt=n.n(ht),vt=nt(Object(rt.b)(function(e){return{page:e.page}})(function(e){var t=e.page,n=e.deps,r=function(){var e=Object(s.a)(u.a.mark(function e(){var t,r,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=prompt("Enter page to jump to:"))){e.next=7;break}return r=n(It),e.next=5,r.getPage(t);case 5:(a=e.sent)?a.show():alert("No page found with that name!");case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();return v.a.createElement("div",{className:mt.a.root},v.a.createElement("div",{className:mt.a.bar},v.a.createElement("h5",{className:mt.a.title},"Debug"),v.a.createElement("button",{className:mt.a.page,onClick:r},t)),null)})),gt=Object(rt.b)(function(e){return{debug:e.debug}})(function(e){return e.debug?v.a.createElement(vt,null):null}),yt=n(41),Et=n(112),Ot=n.n(Et),_t=function(e){var t=e.children,n=e.className,r=e.hide,a=Object(y.a)(e,["children","className","hide"]);return v.a.createElement("div",Object.assign({className:O()(Ot.a.root,Object(ue.a)({},Ot.a.hide,r),n)},a),t)},jt=nt(function(e){var t=(0,e.deps)(W.a);return v.a.createElement(_t,{onClick:function(e){e.stopPropagation(),t.call("openRatingDialog")}},v.a.createElement(yt.d,{size:20,color:"white"}))}),kt=n(113),wt=n.n(kt),Pt=Object(rt.b)(function(e){return{preview:e.preview,debug:e.debug}})(nt(function(e){var t=e.preview,n=e.debug;e.deps;return t?v.a.createElement(_t,{className:O()(wt.a.root,n?wt.a.enabled:null),onClick:function(e){e.stopPropagation(),ae.c.toggleDebug()}},v.a.createElement(yt.a,{size:20,color:"white"})):null})),xt=n(21),Nt=n.n(xt),Ct=function(e){var t=e.viewportRef,n=Object(m.useState)(!1),r=Object(o.a)(n,2),a=r[0],i=r[1];return Object(m.useEffect)(function(){var e=function(){a!==Nt.a.isFullscreen&&i(Nt.a.isFullscreen)};return Nt.a.enabled&&Nt.a.on("change",e),function(){Nt.a.enabled&&Nt.a.off("change",e)}},[]),Nt.a.enabled?v.a.createElement(_t,{hide:!Nt.a.enabled,onClick:function(e){if(e.stopPropagation(),a)Nt.a.exit();else{if(!t.current)return;Nt.a.request(t.current)}i(!a)}},a?v.a.createElement(yt.c,{size:24,color:"white"}):v.a.createElement(yt.b,{size:24,color:"white"})):null},Tt=n(61),At=n.n(Tt),St=Object(rt.b)(function(e){return{title:e.title,author:e.author}})(nt(function(e){var t=e.deps,n=e.title,r=e.author,a=e.viewportRef,i=t(W.a);return v.a.createElement("div",{className:At.a.root},v.a.createElement("span",{className:At.a.tease},n),v.a.createElement("span",{className:At.a.author},v.a.createElement("button",{className:At.a.authorButton,onClick:function(){return i.call("goToAuthor")}},r)),v.a.createElement("div",{style:{flex:1}}),v.a.createElement(gt,null),v.a.createElement(Pt,null),v.a.createElement(jt,null),v.a.createElement(Ct,{viewportRef:a}))})),Mt=n(57),Bt=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={error:null},n.viewportRef=Object(m.createRef)(),n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e}),Mt.withScope(function(n){Object.keys(t).forEach(function(e){n.setExtra(e,t[e])}),Mt.captureException(e)})}},{key:"render",value:function(){var e=this.props.deps;return v.a.createElement(rt.a,{store:ae.b},v.a.createElement(et,{value:e},v.a.createElement(St,{viewportRef:this.viewportRef}),v.a.createElement(bt,{viewportRef:this.viewportRef})))}}]),t}(m.Component),Rt=U()("eos:host:EosHost"),Lt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this))).handleGlobalClick=function(){n.emit("continue")},n.handleGlobalKeydown=function(e){32===e.which&&n.emit("continue")},n.getPageNames=function(){return n.pageNames},n._deps=e,n.modules={},n.pages={},n.pageNames=[],n.currentPage=null,n.startPageId="start",n.startPage=null,n.virtualMachine=n._deps(L.b),n.outerSandbox=n._deps(W.a),n.animator=n._deps(ze),n.actionQueue=n._deps(R.a),n.script=n._deps(Ue.a),document.body.addEventListener("keydown",n.handleGlobalKeydown.bind(Object(h.a)(Object(h.a)(n)))),n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"setStartPage",value:function(e){this.startPageId=e}},{key:"load",value:function(){var e=this;Object(s.a)(u.a.mark(function t(){var n,r,a,i,o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.animator.start(),(n=document.querySelector("#eosScriptPreloader > p")).textContent="Loading script",t.next=5,e.script.load();case 5:if(r=t.sent,n.textContent="Loading modules",!r.modules){t.next=17;break}a=Object.keys(r.modules),i=0;case 10:if(!(i<a.length)){t.next=17;break}return o=a[i],t.next=14,e.loadModule(o,r.modules[o]);case 14:i++,t.next=10;break;case 17:return e.pages=r.pages,e.pageNames=Object.keys(r.pages),e.initVirtualMachine(),r.init&&e.virtualMachine.eval(r.init),n.textContent="Loading media",t.next=24,e.preloadPage(e.startPageId,1);case 24:return e.startPage=t.sent,e.removePreloader(),t.next=28,new Promise(function(t){Ve.a.render(v.a.createElement(Bt,{host:e,deps:e._deps}),document.getElementById("eosContainer"),t)});case 28:case"end":return t.stop()}},t,this)}))().catch(function(e){console.error("script error:",e)})}},{key:"initVirtualMachine",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t,n=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=[].concat(Object.values(i).map(function(e){return n._deps(e)}).map(function(e){return e.init.bind(e)}),Object.values(this.modules).map(function(e){return e.vm}).filter(Boolean)),this.virtualMachine.init(t);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"runScript",value:function(){var e=Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Rt("start tease"),ae.c.start(),this.startPage.show();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadModule",value:function(){var e=Object(s.a)(u.a.mark(function e(t,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a[t+"Module"]){e.next=2;break}throw new Error("Invalid module: "+t);case 2:return e.next=4,a[t+"Module"]();case 4:return r=e.sent,e.next=7,r.default(this._deps);case 7:this.modules[t]=e.sent,console.info("loaded module:",t);case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"removePreloader",value:function(){var e=document.getElementById("eosScriptPreloader");e.parentNode.removeChild(e)}},{key:"getPage",value:function(e){var t=this,n=this.pages[e];if(n){var r=[],a=new Map,i=!1,o=!1,c=function(e){if(t.pages[e]){if(a.get(e))return a.get(e);for(var n={id:e},r=["preload","unload","show"],i=function(){var a=r[o];n[a]=function(){for(var i=t.getPage(e),o=0;o<r.length;o++){var c=r[o];n[c]=i[c]}return n[a]()}},o=0;o<r.length;o++)i();return a.set(e,n),n}Rt("page %s not found",e)},l=function(e){var n=F.a.filter(e);return t.pageNames.filter(n).map(c)},f=function(){var t=Object(s.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=2;break}return t.abrupt("return",i);case 2:return Rt("preload page %s",e),i=Promise.all(r.map(function(e){return e.load()})),t.next=6,i;case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),p=n.map(function(e){return function e(n){var a=Object.keys(n)[0],i=t.getCommandByType(a);if("function"!==typeof i)throw new Error("Invalid command: "+a);var o=Object.assign({type:a,opts:n[a],load:function(){var e=Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),unload:function(){},run:function(){},render:null},i({deps:t._deps,host:t,opts:n[a],getCommand:e,getPage:c,getPagesByGlob:l}));return r.push(o),o}(e)}),d={id:e,preload:f,unload:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(Rt("unload page %s",e),o){var n=!0,i=!1,c=void 0;try{for(var u,s=a.values()[Symbol.iterator]();!(n=(u=s.next()).done);n=!0){var l=u.value;-1===t.indexOf(l.id)&&l.unload()}}catch(p){i=!0,c=p}finally{try{n||null==s.return||s.return()}finally{if(i)throw c}}}for(var f=0;f<r.length;f++)r[f].unload()},show:function(){var n=Object(s.a)(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Rt("show page %s",e),o=!0,ae.c.leavePage(),t.actionQueue.stopQueue(),t.actionQueue.clearQueue(),n.next=7,f();case 7:return Array.from(a.values()).forEach(function(e){e.preload().catch(function(t){console.error("Error preloading page "+e.id+": "+(t&&t.stack?t.stack:t))})}),t.currentPage&&t.currentPage.unload([e]),ae.c.gotoPage(e),t.currentPage=d,t.emit("page",e),n.abrupt("return",t.actionQueue.setQueue(p));case 13:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}()};return d}}},{key:"preloadPage",value:function(){var e=Object(s.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.getPage(t))){e.next=4;break}return e.next=4,n.preload();case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"preloadCommand",value:function(){var e=Object(s.a)(u.a.mark(function e(t){var n,r,a=arguments;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=a.length>1&&void 0!==a[1]?a[1]:0)<0)){e.next=3;break}return e.abrupt("return");case 3:if("function"!==typeof(r=this.getCommand(t)).preload){e.next=7;break}return e.next=7,r.preload({depth:n});case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"showPage",value:function(){var e=Object(s.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ae.c.gotoPage(t),this.pages[t]){e.next=3;break}throw new Error("No such page: "+t);case 3:return n=this.getPage(t),e.prev=4,e.next=7,n.show();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.error(e.t0,"(page ".concat(t,")"));case 12:case"end":return e.stop()}},e,this,[[4,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"runCommands",value:function(e){return this.actionQueue.setQueue(e)}},{key:"getCommandByType",value:function(e){if(-1!==e.indexOf(".")){var t=e.split("."),n=Object(o.a)(t,2),a=n[0],i=n[1];if(!this.modules[a])throw new Error("Module not available: "+a);return this.modules[a].commands[i+"Command"]}return r[e+"Command"]}}]),t}(Fe.EventEmitter),It=t.a=Lt},81:function(e,t,n){e.exports={root:"SplashScreen_root__1_bN3",start:"SplashScreen_start__3ppcv",blinky:"SplashScreen_blinky__o8qxZ"}},9:function(e,t,n){"use strict";n.d(t,"a",function(){return m}),n.d(t,"c",function(){return v});var r,a=n(12),i=n(16),o=n(4),c=n(11),u=n(56),s=n(14),l={start:Object(s.createAction)("start"),load:Object(s.createAction)("load"),leavePage:Object(s.createAction)("leave page"),gotoPage:Object(s.createAction)("goto page"),setBackgroundColor:Object(s.createAction)("set background color"),setMedia:Object(s.createAction)("set media"),addBubble:Object(s.createAction)("add bubble"),addActivity:Object(s.createAction)("add activity"),addPageElement:Object(s.createAction)("add page element"),addUiElement:Object(s.createAction)("add ui element"),toggleDebug:Object(s.createAction)("toggle debug")},f={started:!1,title:"",author:"",preview:!1,script:{},page:"",pageElements:[],uiElements:[],bubbles:[],activities:[],statusEffects:[],debug:!1},p=0,d=(r={},Object(a.a)(r,l.start,function(e){return Object(c.a)({},e,{started:!0})}),Object(a.a)(r,l.load,function(e,t){var n=t.title,r=t.author,a=t.script,i=t.preview;return Object(c.a)({},e,{title:n,author:r,script:a,preview:i,debug:i})}),Object(a.a)(r,l.leavePage,function(e){return Object(c.a)({},e,{pageElements:[],bubbles:[],activities:[]})}),Object(a.a)(r,l.gotoPage,function(e,t){return Object(c.a)({},e,{page:t,pageElements:[],bubbles:[]})}),Object(a.a)(r,l.setBackgroundColor,function(e,t){return Object(c.a)({},e,{backgroundColor:t})}),Object(a.a)(r,l.setMedia,function(e,t){return Object(c.a)({},e,{media:t})}),Object(a.a)(r,l.addBubble,function(e,t){var n=e.bubbles,r=Object(o.a)(e,["bubbles"]);return Object(c.a)({},r,{bubbles:[].concat(Object(i.a)(n),[{key:p++,Component:t}])})}),Object(a.a)(r,l.addActivity,function(e,t){var n=e.activities,r=Object(o.a)(e,["activities"]);return Object(c.a)({},r,{activities:[].concat(Object(i.a)(n),[{key:p++,Component:t}])})}),Object(a.a)(r,l.addPageElement,function(e,t){var n=e.pageElements,r=Object(o.a)(e,["pageElements"]);return Object(c.a)({},r,{pageElements:[].concat(Object(i.a)(n),[{key:p++,Component:t}])})}),Object(a.a)(r,l.addUiElement,function(e,t){var n=e.uiElements,r=Object(o.a)(e,["uiElements"]);return Object(c.a)({},r,{uiElements:[].concat(Object(i.a)(n),[{key:p++,Component:t}])})}),Object(a.a)(r,l.toggleDebug,function(e){var t=e.debug,n=Object(o.a)(e,["debug"]);return Object(c.a)({},n,{debug:!t})}),r),b=Object(s.createReducer)(d,f),h=Object(u.b)(b,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d=Object(c.a)({},d,e),f=Object(c.a)({},f,t);var n=Object(s.createReducer)(d,f);h.replaceReducer(n)};t.b=h;var v=Object(u.a)(l,h.dispatch)}},[[184,8,6]]]);
//# sourceMappingURL=main.47bcc82b.chunk.js.map