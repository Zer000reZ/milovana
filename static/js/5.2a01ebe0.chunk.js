(this["webpackJsonpeos-host"]=this["webpackJsonpeos-host"]||[]).push([[5],{205:function(t,e,A){"use strict";A.r(e);var o=A(1),n=A.n(o),i=A(2),s=A(3),r=A(188),u=A(100),a=A(15),c=A.n(a),p=c()("eos:audio:AudioMixer"),h=function(){function t(e){Object(i.a)(this,t),this._clips=new Map,this.userInteraction=e(u.a)}return Object(s.a)(t,[{key:"init",value:function(){this.userInteraction.registerInteractionCallback((function(){p("initialized audio"),new r.Howl({src:["data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU2LjM2LjEwMAAAAAAAAAAAAAAA//OEAAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAEAAABIADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV6urq6urq6urq6urq6urq6urq6urq6urq6v////////////////////////////////8AAAAATGF2YzU2LjQxAAAAAAAAAAAAAAAAJAAAAAAAAAAAASDs90hvAAAAAAAAAAAAAAAAAAAA//MUZAAAAAGkAAAAAAAAA0gAAAAATEFN//MUZAMAAAGkAAAAAAAAA0gAAAAARTMu//MUZAYAAAGkAAAAAAAAA0gAAAAAOTku//MUZAkAAAGkAAAAAAAAA0gAAAAANVVV"],formats:["mp3"],html5:!1}).play()}))}},{key:"registerAudio",value:function(t,e){var A=this._clips.get(t);A&&A.stop(),this._clips.set(t,e)}},{key:"unregisterAudio",value:function(t,e){this._clips.get(t)===e&&this._clips.delete(t)}},{key:"getAudio",value:function(t){return this._clips.get(t)}}]),t}(),l=A(5),d=["play","end","pause"],f=function(){function t(e){Object(i.a)(this,t),this.audioMixer=e(h),this.virtualMachine=e(l.b)}return Object(s.a)(t,[{key:"init",value:function(t,e){var A=this;this.interpreter=t;this.SOUND=t.createNativeFunction((function(){throw new Error("Cannot construct Sound object, use Sound.get")}),!0),t.setProperty(this.SOUND,"prototype",t.createObject(e.properties.EventTarget),l.a.NONENUMERABLE_DESCRIPTOR),this.SOUND_PROTO=this.SOUND.properties.prototype,t.setProperty(e,"Sound",this.SOUND);t.setProperty(this.SOUND,"get",t.createNativeFunction((function(t){if("string"!==typeof t)throw new TypeError("id must be a string");var e=A.audioMixer.getAudio(t);if(e){d.forEach((function(t){e.sound.on(t,(function(){A.virtualMachine.dispatchEvent({target:o,type:t})}))}));var o=A.interpreter.createObjectProto(A.SOUND_PROTO);return o.data=e,o}})),l.a.NONENUMERABLE_DESCRIPTOR);t.setNativeFunctionPrototype(this.SOUND,"play",(function(){this.data.play()})),t.setNativeFunctionPrototype(this.SOUND,"pause",(function(){this.data.pause()})),t.setNativeFunctionPrototype(this.SOUND,"stop",(function(){this.data.stop()})),t.setNativeFunctionPrototype(this.SOUND,"seek",(function(t){if(t=Number(t),isNaN(t))throw new TypeError("time must be a valid number");if(t<0)throw new RangeError("time must be greater than or equal to 0");this.data.seek(t)})),t.setNativeFunctionPrototype(this.SOUND,"setVolume",(function(t){if(t=Number(t),isNaN(t))throw new TypeError("volume must be a valid number");if(t<0)throw new RangeError("volume must be greater than or equal to 0");if(t>1)throw new RangeError("volume must be less than or equal to 1");this.data.setVolume(t)})),t.setNativeFunctionPrototype(this.SOUND,"destroy",(function(){this.data.destroy()}))}}]),t}(),v=A(72),y=c()("eos:audio:AudioClip"),m=function(){function t(e){var A=e.url,o=e.loops,n=e.volume,s=e.onDestroy;Object(i.a)(this,t),this.url=A,this.loops=o,this.loopsRemaining=o-1,this.onDestroy=s,this.sound=new r.Howl({src:[A],format:["mp3"],volume:n,onend:this.handleEnded.bind(this),html5:!1})}return Object(s.a)(t,[{key:"play",value:function(){y("playing sound %s",this.url),this.sound.play()}},{key:"pause",value:function(){this.sound.pause()}},{key:"stop",value:function(){this.sound.stop()}},{key:"seek",value:function(t){this.sound.seek(t)}},{key:"setVolume",value:function(t){this.sound.volume(t)}},{key:"destroy",value:function(){this.stop(),"function"===typeof this.onDestroy&&this.onDestroy()}},{key:"handleEnded",value:function(){this.loopsRemaining>0&&(this.loopsRemaining--,this.sound.play())}}]),t}(),w=function(t){t.host;var e,A,o=t.deps,i=t.opts,s=i.locator,r=i.loops,u=void 0===r?1:r,a=i.volume,c=void 0===a?1:a,p=i.id,l=i.background,d=o(v.a),f=o(h),y=d.resolveLocator({type:"audio/mpeg",locator:s});return{load:function(){return n.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.awrap(d.preload(y));case 2:e=t.sent;case 3:case"end":return t.stop()}}))},run:function(){(A=new m({url:e,loops:0===u?1/0:u,volume:c,onDestroy:p?function(){f.unregisterAudio(p,A)}:null})).play(),p&&f.registerAudio(p,A)},unload:function(){A&&!l&&A.destroy(),d.revoke(y)}}};e.default=function(t){var e,A;return n.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e=t(f),t(h).init(),A={playCommand:w},o.abrupt("return",{commands:A,vm:e.init.bind(e)});case 5:case"end":return o.stop()}}))}}}]);
//# sourceMappingURL=5.2a01ebe0.chunk.js.map